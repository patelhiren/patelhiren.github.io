<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Openclaw on Hiren Patel</title>
    <link>https://patelhiren.com/tags/openclaw/</link>
    <description>Recent content in Openclaw on Hiren Patel</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>¬© Copyright {year}, Hiren Patel</copyright>
    <lastBuildDate>Fri, 27 Feb 2026 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://patelhiren.com/tags/openclaw/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Building the Weather-NWS Skill for OpenClaw</title>
      <link>https://patelhiren.com/blog/building-weather-nws-skill-openclaw/</link>
      <pubDate>Fri, 27 Feb 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/building-weather-nws-skill-openclaw/</guid>
      <description>&lt;p&gt;I wanted snow accumulation forecasts from OpenClaw, but the wttr.in skill only returned &amp;ldquo;Heavy snow&amp;rdquo; text. I needed: how much snow, when it starts. I discovered the National Weather Service API‚Äîfree, no API key, US-only‚Äîand built a unified skill with AirNow AQI and global fallback.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I wanted snow accumulation forecasts from OpenClaw, but the wttr.in skill only returned &ldquo;Heavy snow&rdquo; text. I needed: how much snow, when it starts. I discovered the National Weather Service API‚Äîfree, no API key, US-only‚Äîand built a unified skill with AirNow AQI and global fallback.</p>
<h2 id="discovery-nws-api">Discovery: NWS API</h2>
<p>The <a href="https://api.weather.gov/"target="_blank" rel="noopener noreferrer">National Weather Service API</a> returns structured data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;snowfallAmount&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;values&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&#34;validTime&#34;</span><span class="p">:</span> <span class="s2">&#34;2026-02-27T18:00:00/PT24H&#34;</span><span class="p">,</span> <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mi">13</span><span class="p">}],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;unitCode&#34;</span><span class="p">:</span> <span class="s2">&#34;wmoUnit:mm&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>No API key required. Requests against <code>api.weather.gov</code> just work. But it&rsquo;s US-only‚Äîinternational locations need <a href="https://wttr.in/"target="_blank" rel="noopener noreferrer">wttr.in</a> fallback.</p>
<p>Gridpoint API (<code>/gridpoints/{wfo}/{x},{y}</code>) has structured snow/ice/rain values. Zone forecast API is less detailed. Grid lookup requires geocoding first via <code>/points/{lat},{lon}</code>.</p>
<p>Later I discovered <a href="https://www.airnow.gov/"target="_blank" rel="noopener noreferrer">AirNow</a> AQI‚Äîalso no API key. Useful when deciding if post-storm shoveling is safe.</p>
<h2 id="api-hierarchy">API Hierarchy</h2>
<p>The skill auto-detects source based on location:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">if</span> <span class="n">is_us_location</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">get_nws_data</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>  <span class="c1"># Structured accumulations</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">get_wttr_data</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>     <span class="c1"># Text fallback</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="temporal-query-detection">Temporal Query Detection</h2>
<p>wttr.in returns day summaries. I wanted hourly breakdowns for &ldquo;What time does the rain stop?&rdquo;</p>
<p>The skill detects time qualifiers:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">strip_temporal_qualifiers</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+at\s+\d{1,2}\s*(?::\d</span><span class="si">{2}</span><span class="s1">)?\s*[APap][Mm]?&#39;</span><span class="p">,</span>  <span class="c1"># &#34;at 8 PM&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+around\s+\d{1,2}&#39;</span><span class="p">,</span>                            <span class="c1"># &#34;around 3&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+this\s+(?:morning|afternoon|evening)&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+tonight&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>When detected, it queries <code>/gridpoints/{wfo}/{x},{y}/forecast/hourly</code> instead‚Äî156 hourly periods (~7 days).</p>
<h2 id="phase-implementation">Phase Implementation</h2>
<h3 id="phase-1-core-with-grid-data">Phase 1: Core with Grid Data</h3>
<p><code>get_weather.py</code> orchestrates the unified call:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Seattle&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Script flow:</p>
<ol>
<li>Geocode via NWS <code>/points</code> endpoint for grid ID and forecast URLs</li>
<li>Fetch structured forecast or hourly if temporal detected</li>
<li>If <code>--aqi</code> flag, fetch AirNow current + forecast</li>
<li>For non-US locations, hit wttr.in</li>
</ol>
<h3 id="phase-2-station-observations">Phase 2: Station Observations</h3>
<p>NWS has observed conditions at weather stations. Added <code>--current</code> flag to compare forecast vs reality:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="c1">// /stations/{stationId}/observations/latest
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;properties&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;temperature&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="nt">&#34;unitCode&#34;</span><span class="p">:</span> <span class="s2">&#34;wmoUnit:degC&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;windSpeed&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mf">5.14</span><span class="p">,</span> <span class="nt">&#34;unitCode&#34;</span><span class="p">:</span> <span class="s2">&#34;wmoUnit:km_h-1&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="phase-3-edge-cases">Phase 3: Edge Cases</h3>
<ul>
<li><strong>Aviation TAFs</strong>: Terminal forecasts via <code>/stations/{stationId}/tafs</code>. Most civilian stations lack TAF‚Äîuse <code>--taf</code> explicitly</li>
<li><strong>Astronomical</strong>: Sunrise/sunset via <code>skyfield</code> library with <code>--astro</code></li>
<li><strong>Fire weather</strong>: Red flag warnings from NWS alerts API with <code>--fire</code></li>
</ul>
<h2 id="declaring-environment-variables">Declaring Environment Variables</h2>
<p><a href="https://clawhub.ai/"target="_blank" rel="noopener noreferrer">Clawdhub.ai</a> validates skills before listing. Skills using environment variables must declare them in <code>SKILL.md</code> metadata or get flagged as suspicious.</p>
<p>Added the <code>clawdis</code> block to register <code>AIRNOW_API_KEY</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span>{<span class="s2">&#34;clawdhub&#34;</span><span class="p">:</span>{<span class="s2">&#34;emoji&#34;</span><span class="p">:</span><span class="s2">&#34;üå¶Ô∏è&#34;</span>}<span class="p">,</span><span class="s2">&#34;clawdis&#34;</span><span class="p">:</span>{<span class="s2">&#34;envVars&#34;</span><span class="p">:[</span>{<span class="s2">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;AIRNOW_API_KEY&#34;</span><span class="p">,</span><span class="s2">&#34;required&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&#34;description&#34;</span><span class="p">:</span><span class="s2">&#34;AirNow API Key for AQI lookup&#34;</span>}<span class="p">]</span>}}<span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>This tells the validation system:</p>
<ul>
<li>The skill accepts an optional <code>AIRNOW_API_KEY</code> environment variable</li>
<li>It&rsquo;s not required‚ÄîAirNow works unauthenticated with stricter rate limits</li>
<li>OpenClaw injects the variable if configured in <code>clawdbot.json</code></li>
</ul>
<h2 id="usage">Usage</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Standard forecast</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Boston&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Hourly with AQI</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Boston at 8 PM&#34;</span> --aqi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Current observations vs forecast</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Boston&#34;</span> --current
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Aviation TAF (if available)</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;JFK&#34;</span> --taf
</span></span></code></pre></td></tr></table>
</div>
</div><p>Available on <a href="https://clawhub.ai/patelhiren/weather-nws"target="_blank" rel="noopener noreferrer">clawdhub.ai/patelhiren/weather-nws</a>.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Using macOS newsyslog to Rotate Service Logs</title>
      <link>https://patelhiren.com/blog/macos-newsyslog-openclaw-logs/</link>
      <pubDate>Wed, 25 Feb 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/macos-newsyslog-openclaw-logs/</guid>
      <description>&lt;p&gt;I noticed my &lt;a href=&#34;https://clawd.bot/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OpenClaw&lt;/a&gt; gateway log files were growing unbounded. The service runs via &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;launchd&lt;/a&gt;, and while the app has built-in log rotation, the stdout/stderr capture in the launchd plist was bypassing it entirely.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I noticed my <a href="https://clawd.bot/"target="_blank" rel="noopener noreferrer">OpenClaw</a> gateway log files were growing unbounded. The service runs via <a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html"target="_blank" rel="noopener noreferrer">launchd</a>, and while the app has built-in log rotation, the stdout/stderr capture in the launchd plist was bypassing it entirely.</p>
<h2 id="the-problem">The Problem</h2>
<p>When a macOS service uses <code>StandardOutPath</code> and <code>StandardErrorPath</code> in its launchd plist, those files just append forever. My logs had grown to 38MB with no mechanism to clean them up:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -lh ~/.openclaw/logs/
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff  3.9M Feb <span class="m">25</span> 17:48 gateway.log
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff  38M  Feb <span class="m">25</span> 17:48 gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>OpenClaw&rsquo;s internal logger writes date-based rotating logs to <code>/tmp/openclaw/</code>, but launchd&rsquo;s stdout capture writes directly to the configured files, bypassing that rotation logic.</p>
<p><strong>The Hidden Trap:</strong> When log rotation tools like <code>newsyslog</code> create new log files, they default to <code>root:root</code> ownership. If your launchd service runs as your user (not root), it suddenly can&rsquo;t write to its own log files after rotation. The daemon fails to start with &ldquo;Permission denied&rdquo; errors, and you&rsquo;re left wondering why your service won&rsquo;t start.</p>
<h2 id="the-solution-newsyslog">The Solution: newsyslog</h2>
<p>macOS includes <a href="https://www.freebsd.org/cgi/man.cgi?newsyslog%288%29"target="_blank" rel="noopener noreferrer">newsyslog</a>, a utility for managing log file rotation. It&rsquo;s already running on your system, checking logs periodically via launchd. You just need to tell it about your custom log files.</p>
<h3 id="configuration">Configuration</h3>
<p>Create a config file for your service logs:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo tee /etc/newsyslog.d/openclaw.conf <span class="s">&lt;&lt; &#39;EOF&#39;
</span></span></span><span class="line"><span class="cl"><span class="s"># OpenClaw gateway logs - rotate at 10MB, keep zero archives
</span></span></span><span class="line"><span class="cl"><span class="s">/Users/clawd/.openclaw/logs/gateway.log    clawd:staff    644  0  10000  *  B
</span></span></span><span class="line"><span class="cl"><span class="s">/Users/clawd/.openclaw/logs/gateway.err.log    clawd:staff    644  0  10000  *  B
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Important:</strong> Notice the <code>clawd:staff</code> owner:group fields. Without these, newsyslog creates the new log files as <code>root:root</code> after rotation. When your launchd service tries to write to a root-owned file, it gets &ldquo;Permission denied&rdquo; and the daemon fails to start.</p>
<p>Field breakdown:</p>
<ul>
<li><code>clawd:staff</code> ‚Äî Owner and group for the log files (critical!)</li>
<li><code>644</code> ‚Äî File permissions (owner read/write, others read-only)</li>
<li><code>0</code> ‚Äî Number of archived files to keep (zero = just truncate)</li>
<li><code>10000</code> ‚Äî Size threshold in KB (~10MB)</li>
<li><code>*</code> ‚Äî Rotate at any time (not just specific hours)</li>
<li><code>B</code> ‚Äî Treat as binary (no special encoding)</li>
</ul>
<h3 id="what-happens-without-owner-specified">What Happens Without Owner Specified</h3>
<p>If you omit the owner:group fields, you&rsquo;ll see this after newsyslog runs:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -la ~/.openclaw/logs/
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> root   wheel     <span class="m">0</span> Feb <span class="m">25</span> 18:30 gateway.log
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> root   wheel     <span class="m">0</span> Feb <span class="m">25</span> 18:30 gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then your service fails to start with errors like:</p>
<pre tabindex="0"><code>Could not open log file /Users/clawd/.openclaw/logs/gateway.log: Permission denied
Service exited with abnormal code: 1
</code></pre><p>The <code>clawd:staff</code> fields ensure the rotated files remain owned by your user, not root.</p>
<h3 id="reload-and-verify">Reload and Verify</h3>
<p>Tell newsyslog to reload its configuration:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo killall -HUP newsyslog
</span></span></code></pre></td></tr></table>
</div>
</div><p>Check that the config loaded correctly:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo newsyslog -v -f /etc/newsyslog.d/openclaw.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>Force an immediate rotation to test:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo newsyslog -v -f /etc/newsyslog.d/openclaw.conf -R <span class="s2">&#34;manual&#34;</span> ~/.openclaw/logs/gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Note:</strong> The <code>-R</code> flag with a requestor name is optional. Plain <code>newsyslog -v -f /path/to/config</code> works fine for testing.</p>
</blockquote>
<h2 id="why-not-cron">Why Not Cron?</h2>
<p>I considered a simple cron job:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">0</span> <span class="m">3</span> * * * truncate -s <span class="m">0</span> ~/.openclaw/logs/gateway.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>That would work, but newsyslog is the native macOS tool for this. It&rsquo;s already running, already has permission handling figured out, and rotates based on file size rather than just time. If your log suddenly explodes to 500MB, newsyslog catches it on the next check cycle (every 30 minutes). Cron would wait until 3 AM.</p>
<h2 id="result">Result</h2>
<p>After setup, my 38MB error log was truncated to zero bytes:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -lh ~/.openclaw/logs/
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff  4.9M Feb <span class="m">25</span> 18:02 gateway.log
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff   0B  Feb <span class="m">25</span> 18:10 gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>No manual intervention needed going forward. When either file crosses 10MB, newsyslog truncates it automatically.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.freebsd.org/cgi/man.cgi?newsyslog%288%29"target="_blank" rel="noopener noreferrer">newsyslog man page</a></li>
<li><a href="https://docs.openclaw.ai/"target="_blank" rel="noopener noreferrer">OpenClaw documentation</a></li>
<li><a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html"target="_blank" rel="noopener noreferrer">launchd documentation</a></li>
</ul>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Tag-Teaming Claude Code with an AI Agent via Tmux</title>
      <link>https://patelhiren.com/blog/tag-teaming-claude-code-with-ai-agent/</link>
      <pubDate>Thu, 22 Jan 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/tag-teaming-claude-code-with-ai-agent/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://claude.ai/code&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Claude Code&lt;/a&gt; is an impressive CLI that brings sophisticated AI-assisted coding directly into the terminal. Its TUI (Text User Interface) provides rich feedback through interactive menus, progress bars, and side-by-side diffs. However, long-running tasks present a challenge: if you need to step away from your computer, the session momentum is often lost.&lt;/p&gt;
&lt;p&gt;To solve this, I‚Äôve developed a workflow using &lt;a href=&#34;https://github.com/tmux/tmux/wiki&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Tmux&lt;/a&gt; as a shared terminal state. This allows me to hand off a live session to my &lt;a href=&#34;https://clawd.bot/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Clawdbot&lt;/a&gt; agent and, conversely, take over a session that the agent started. It also provides a mechanism to optionally switch between different account tokens (such as a work account) on the fly.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p><a href="https://claude.ai/code"target="_blank" rel="noopener noreferrer">Claude Code</a> is an impressive CLI that brings sophisticated AI-assisted coding directly into the terminal. Its TUI (Text User Interface) provides rich feedback through interactive menus, progress bars, and side-by-side diffs. However, long-running tasks present a challenge: if you need to step away from your computer, the session momentum is often lost.</p>
<p>To solve this, I‚Äôve developed a workflow using <a href="https://github.com/tmux/tmux/wiki"target="_blank" rel="noopener noreferrer">Tmux</a> as a shared terminal state. This allows me to hand off a live session to my <a href="https://clawd.bot/"target="_blank" rel="noopener noreferrer">Clawdbot</a> agent and, conversely, take over a session that the agent started. It also provides a mechanism to optionally switch between different account tokens (such as a work account) on the fly.</p>
<h2 id="the-core-concept-persistence">The Core Concept: Persistence</h2>
<p>The strategy relies on Tmux sessions to maintain a persistent terminal state in memory. By using named sessions, both the human and the AI agent can attach to and drive the exact same process. This ensures zero context loss when switching between &ldquo;manual&rdquo; and &ldquo;agent&rdquo; mode.</p>
<h2 id="configuration-storing-account-profiles">Configuration: Storing Account Profiles</h2>
<p>To enable the agent to switch accounts, you can store secondary tokens in the <code>coding-agent</code> skill section of <code>clawdbot.json</code>. Using simple shorthand keys makes it easier to request them from a phone.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;skills&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;entries&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;coding-agent&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;env&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;CC_ACC2_TOKEN&#34;</span><span class="p">:</span> <span class="s2">&#34;your-token-here&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="workflow-1-human-to-agent-hand-off">Workflow 1: Human to Agent Hand-off</h2>
<p>When I am working at my desk and need to step away, I follow these steps:</p>
<ol>
<li>
<p><strong>Start a named Tmux session</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tmux new -s hiren-claude
</span></span><span class="line"><span class="cl">claude
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Pro-Tip</strong>: If you want to launch manually with a specific account token, use the <code>env</code> prefix within the Tmux command string to ensure the environment variable is correctly injected into the background session:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tmux new -s hiren-claude -d <span class="s2">&#34;env CLAUDE_CODE_OAUTH_TOKEN=&#39;your-token&#39; claude&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p><strong>Request Hand-off</strong>: From WhatsApp, I tell the agent:</p>
<blockquote>
<p>&ldquo;Take over session <code>hiren-claude</code>. Finish the refactor.&rdquo;</p>
</blockquote>
</li>
</ol>
<h3 id="environment-inheritance">Environment Inheritance</h3>
<p>If I start a session at my desk using <code>export CLAUDE_CODE_OAUTH_TOKEN=...</code>, the agent inherits that environment automatically when it takes over the Tmux pane. Keystrokes sent by the agent will be processed within that authenticated shell.</p>
<h2 id="workflow-2-agent-to-human-take-over">Workflow 2: Agent to Human Take-over</h2>
<p>The hand-off also works in reverse. I can have the agent start a complex task while I am away:</p>
<h3 id="default-account-example">Default Account Example</h3>
<p>I can instruct the agent to start a new run using my default CLI login:</p>
<blockquote>
<p>&ldquo;Start a new session <code>hiren-claude</code> and begin refactoring the database schema.&rdquo;</p>
</blockquote>
<p>Behind the scenes, the agent runs <code>tmux new -s hiren-claude -d &quot;claude '...'&quot;</code>.</p>
<h3 id="specific-account-example">Specific Account Example</h3>
<p>If I want the agent to use a specific account profile from the config:</p>
<blockquote>
<p>&ldquo;Start a new session <code>hiren-claude</code> using <code>cc-acc2-token</code> and fix the memory leak.&rdquo;</p>
</blockquote>
<p>The agent then prepends the token to the execution, mapping the <code>CC_ACC2_TOKEN</code> from the config to the <code>CLAUDE_CODE_OAUTH_TOKEN</code> required by the CLI.</p>
<h3 id="human-take-over">Human Take-over</h3>
<p>When I return to my computer, I can attach to the session and take full control immediately:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tmux attach -t hiren-claude
</span></span></code></pre></td></tr></table>
</div>
</div><p>Because Tmux lives in the background, this works even if the screen is locked, provided the computer remains awake.</p>
<h2 id="benefits-of-the-tmux-bridge">Benefits of the Tmux Bridge</h2>
<ul>
<li><strong>Full TUI Support</strong>: Standard stdin/stdout redirection often breaks the interactive elements of Claude Code. Using Tmux preserves the full visual experience.</li>
<li><strong>Real-time Monitoring</strong>: I can &ldquo;spectate&rdquo; the work by attaching to the session via SSH from a mobile device or another terminal.</li>
<li><strong>Zero Friction</strong>: No need to re-authenticate or re-explain context when switching between human and AI control.</li>
</ul>
<h2 id="pro-tip-smooth-scrolling-in-tmux">Pro-Tip: Smooth Scrolling in Tmux</h2>
<p>One common frustration when using Claude Code inside Tmux is scrolling. By default, using the mouse wheel might send &ldquo;Up/Down&rdquo; arrow keys, which moves the text in the entry box rather than scrolling the terminal history.</p>
<p>To fix this, you can enable <strong>Mouse Mode</strong>. Add the following to your <code>~/.tmux.conf</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">set</span> -g mouse on
</span></span></code></pre></td></tr></table>
</div>
</div><p>With this enabled, you can scroll through Claude&rsquo;s responses naturally. If you don&rsquo;t want to enable global mouse mode, you can always enter <strong>Copy Mode</strong> manually by pressing <code>Ctrl-b</code> then <code>[</code>. Once in copy mode, you can scroll freely; just press <code>q</code> to return to the prompt.</p>
<h2 id="execution-reminders">Execution Reminders</h2>
<ul>
<li><strong>Installation</strong>: Ensure <code>tmux</code> is installed via <a href="https://brew.sh/"target="_blank" rel="noopener noreferrer">Homebrew</a> (<code>brew install tmux</code>).</li>
<li><strong>Naming</strong>: Use consistent session names so the agent knows where to look.</li>
<li><strong>Power Settings</strong>: Configure your Mac to stay awake when the display is off to ensure the Tmux server remains active.</li>
</ul>
<p>By treating the terminal as a shared space, I‚Äôve turned my AI agent into a true tag-team partner. We can hot-swap control of the keyboard and switch accounts on the fly without ever losing the &ldquo;zone.&rdquo;</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Deploying a Sandboxed Family Agent with Cross-Compiled Go Skills in Clawdbot</title>
      <link>https://patelhiren.com/blog/deploying-sandboxed-family-agent-clawdbot/</link>
      <pubDate>Mon, 19 Jan 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/deploying-sandboxed-family-agent-clawdbot/</guid>
      <description>&lt;p&gt;I wanted to set up a &amp;ldquo;Family Agent&amp;rdquo; in &lt;a href=&#34;https://clawd.bot/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Clawdbot&lt;/a&gt; so my family could interact with tools like stock analysis and summarization via WhatsApp. However, I needed to ensure this agent was completely isolated from my personal credentials and host system. Here is how I configured a sandboxed environment and deployed cross-compiled &lt;a href=&#34;https://go.dev/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Go&lt;/a&gt; skills to solve this.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I wanted to set up a &ldquo;Family Agent&rdquo; in <a href="https://clawd.bot/"target="_blank" rel="noopener noreferrer">Clawdbot</a> so my family could interact with tools like stock analysis and summarization via WhatsApp. However, I needed to ensure this agent was completely isolated from my personal credentials and host system. Here is how I configured a sandboxed environment and deployed cross-compiled <a href="https://go.dev/"target="_blank" rel="noopener noreferrer">Go</a> skills to solve this.</p>
<h2 id="customizing-the-sandbox-image">Customizing the Sandbox Image</h2>
<p>Because some skills have specific runtime requirements‚Äîlike the <code>summarize</code> skill needing Node.js 20+ to support newer regular expression flags‚ÄîI created a custom <a href="https://www.docker.com/"target="_blank" rel="noopener noreferrer">Docker</a> image. Using a default image with Node.js v18 resulted in a <code>SyntaxError</code> when the tool&rsquo;s dependencies tried to load, so &ldquo;baking in&rdquo; the correct runtime was the first step.</p>
<h3 id="the-dockerfile">The Dockerfile</h3>
<p>I used a <code>node:20-slim</code> base to ensure all modern Node dependencies were supported:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="s">node:20-slim</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="c"># Install system dependencies</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\
</span></span></span><span class="line"><span class="cl">    curl <span class="se">\
</span></span></span><span class="line"><span class="cl">    ca-certificates <span class="se">\
</span></span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Building the image is a one-time task:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t <span class="o">[</span>YOUR_DOCKER_IMAGE<span class="o">]</span>:1.0 .
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cross-compiling-go-binaries-for-multi-platform-support">Cross-Compiling Go Binaries for Multi-Platform Support</h2>
<p>To keep the agent high-performance, I wrote my custom skills (like <code>stock-analysis</code>) in Go. The beauty of Go is the ability to test locally on my M1 Max (<code>darwin/arm64</code>) and then cross-compile for the sandboxed Linux environment.</p>
<p>By producing a single binary for each platform and placing them in the <code>dist/</code> folder of the skill, the agent can run the correct version regardless of the environment.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Build for macOS (Local Testing)</span>
</span></span><span class="line"><span class="cl"><span class="nv">GOOS</span><span class="o">=</span>darwin <span class="nv">GOARCH</span><span class="o">=</span>arm64 go build -o dist/stock-analysis main.go
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for Linux (Sandbox Deployment)</span>
</span></span><span class="line"><span class="cl"><span class="nv">GOOS</span><span class="o">=</span>linux <span class="nv">GOARCH</span><span class="o">=</span>arm64 go build -o dist/stock-analysis-linux main.go
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="bridging-the-llm-and-code-with-skillmd">Bridging the LLM and Code with <code>SKILL.md</code></h2>
<p>Clawdbot uses a <code>SKILL.md</code> file to discover these binaries and understand how to use them. This file acts as the bridge between the LLM‚Äôs natural language and the Go code. For the stock analysis tool, I defined mandatory rules to ensure the agent returns the raw <code>stdout</code> verbatim, which is critical for trading data fidelity.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gu">### Command
</span></span></span><span class="line"><span class="cl"><span class="gh"># macOS / Darwin
</span></span></span><span class="line"><span class="cl">stock-analysis &lt;TICKER&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gh"># Linux / Sandbox
</span></span></span><span class="line"><span class="cl">stock-analysis-linux &lt;TICKER&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="configuring-the-agent-and-docker-sandbox">Configuring the Agent and Docker Sandbox</h2>
<p>With the image built and skills compiled, I defined the <code>family</code> agent in <code>clawdbot.json</code>. Setting the sandbox mode to <code>all</code> forces every tool execution into the Docker container.</p>
<p>Crucially, because skills like <code>summarize</code> and <code>stock-analysis</code> need to reach out to external APIs and websites, I had to explicitly grant the sandbox internet access by setting the Docker network to <code>bridge</code> mode.</p>
<h3 id="the-agent-json-structure">The Agent JSON Structure</h3>
<p>The <code>env</code> block and <code>sandbox</code> settings live directly within the agent&rsquo;s definition. Here is the full structure for the <code>family</code> agent:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;family&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;family&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;env&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ANTHROPIC_API_KEY&#34;</span><span class="p">:</span> <span class="s2">&#34;{{auth:[YOUR_ANTHROPIC_PROFILE]}}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;GEMINI_API_KEY&#34;</span><span class="p">:</span> <span class="s2">&#34;{{auth:[YOUR_GEMINI_PROFILE]}}&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;workspace&#34;</span><span class="p">:</span> <span class="s2">&#34;[WORKSPACE_PATH]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;sandbox&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;all&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;workspaceAccess&#34;</span><span class="p">:</span> <span class="s2">&#34;rw&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;scope&#34;</span><span class="p">:</span> <span class="s2">&#34;agent&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;docker&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;image&#34;</span><span class="p">:</span> <span class="s2">&#34;[YOUR_DOCKER_IMAGE]:1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;network&#34;</span><span class="p">:</span> <span class="s2">&#34;bridge&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;tools&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sandbox&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;tools&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;allow&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;exec&#34;</span><span class="p">,</span> <span class="s2">&#34;bash&#34;</span><span class="p">,</span> <span class="s2">&#34;read&#34;</span><span class="p">,</span> <span class="s2">&#34;write&#34;</span><span class="p">,</span> <span class="s2">&#34;summarize&#34;</span><span class="p">,</span> <span class="s2">&#34;stock-analysis&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I then bound this agent to a specific WhatsApp group ID so it only responds to family requests:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;bindings&#34;</span><span class="err">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;agentId&#34;</span><span class="p">:</span> <span class="s2">&#34;family&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;channel&#34;</span><span class="p">:</span> <span class="s2">&#34;whatsapp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;peer&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;kind&#34;</span><span class="p">:</span> <span class="s2">&#34;group&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;[YOUR_GROUP_ID]@g.us&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="lessons-learned">Lessons Learned</h2>
<h3 id="1-secure-credential-injection">1. Secure Credential Injection</h3>
<p>A key security feature of the sandbox is that it starts with a clean slate. By checking the sandbox logs, I could see that tools were failing because they lacked API keys. To fix this, I used explicit environment mapping in the JSON config.</p>
<p>You must map the <strong>specific environment variables</strong> that your skills expect (like <code>GEMINI_API_KEY</code> or <code>ANTHROPIC_API_KEY</code>) to your secure Clawdbot authentication profiles inside the <code>env</code> block shown in the configuration section above.</p>
<p>This ensures the agent is &ldquo;least privileged&rdquo;‚Äîit only has the specific tokens it needs to run its assigned skills.</p>
<h2 id="pro-tip-refreshing-the-sandbox">Pro-Tip: Refreshing the Sandbox</h2>
<p>Clawdbot creates the Docker container for the agent only one time. It persists across restarts for speed. If you need to force a clean slate or pick up changes in your custom image, simply delete the running container:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker rm -f <span class="o">[</span>CONTAINER_ID<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Clawdbot will automatically recreate the container from the image on the next request.</p>
<h2 id="wrapping-up">Wrapping Up</h2>
<p>By using Docker for isolation, enabling bridge networking for internet access, and cross-compiling Go binaries for both macOS and Linux, I‚Äôve created a setup that is both high-performance and secure. This configuration allows my family to benefit from agentic workflows while maintaining strict control over credential access and runtime environments.</p>]]></content:encoded>
      
    </item>
    
  </channel>
</rss>