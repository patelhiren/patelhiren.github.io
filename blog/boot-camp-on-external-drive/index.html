<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.73.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Boot Camp on External Drive&nbsp;&ndash;&nbsp;Hiren Patel</title><link rel="stylesheet" href="/css/core.min.ccdbbaeb866774f14e38d6f2540c871298cb086eb049b6a8ed5186e315bcea6640cf8a4b076ee4c275ba28acf018ac1f.css" integrity="sha384-zNu664ZndPFOONbyVAyHEpjLCG6wSbao7VGG4xW86mZAz4pLB27kwnW6KKzwGKwf"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Boot Camp on External Drive" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#191919">
<meta name="msapplication-TileColor" content="#00aba9">
<body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/patelhiren-logo.png" alt /><span class="site name">Hiren Patel</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about/">About</a></nav></div></span></div><div class="site slogan wrap">
            <span class="title left-side">Documenting things as I learn.</span>
            <span class="right-side"><div class="social-buttons">
    <a href="/index.xml" aria-label="Subscribe in your RSS reader">
        <span>
            <i class="fa fa-rss"></i>
        </span>
    </a>
    <a href="https://twitter.com/patelhiren" target="_blank" aria-label="Follow @patelhiren on Twitter">
        <span>
            <i class="fa fa-twitter"></i>
        </span>
    </a>
</div></span>
        </div></section><div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Boot Camp on External Drive</h1><p class="article date">Apr 06, 2020</p></section><article class="article markdown-body"><p>I had a spare SSD and a USB enclosure for it. Installing windows on an external drive is unsupported by Microsoft and the setup will abort stating Windows cannot be installed on an external drive. Here is how I managed to install Windows 10 Pro on the external SSD and boot from it on my iMac.</p>
<h6 id="my-environment">My Environment</h6>
<ul>
<li>27-inch iMac 2019, running macOS Catalina 10.15.4</li>
<li>120 GB ScanDisk Plus SSD</li>
<li>2.5-inch SATA USB enclosure</li>
</ul>
<h6 id="software-needed">Software needed</h6>
<ul>
<li>VMware Fusion 11.5.3 (Trial is fine)</li>
<li>Windows 10 ISO</li>
</ul>
<h6 id="directions">Directions</h6>
<ul>
<li>Launch Disk Utility and select the plugged in SSD. Format as below


<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/01.png">
            <picture>

                    <source 
                        srcset="
                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu35b83139b4b9a667c482960666e96ba3_414407_400x0_resize_box_2.png 400w,
                        
                        
                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu35b83139b4b9a667c482960666e96ba3_414407_600x0_resize_box_2.png 600w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu35b83139b4b9a667c482960666e96ba3_414407_800x0_resize_box_2.png 1000w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu35b83139b4b9a667c482960666e96ba3_414407_1000x0_resize_box_2.png 1200w,
                        

                        /blog/boot-camp-on-external-drive/images/Dark/01.png
                        "
                        media="(prefers-color-scheme: dark)"
                    /><source 
                    srcset="
                    
                    /blog/boot-camp-on-external-drive/images/01_hu35b83139b4b9a667c482960666e96ba3_425087_400x0_resize_box_2.png 400w,
                    
                    
                    
                    /blog/boot-camp-on-external-drive/images/01_hu35b83139b4b9a667c482960666e96ba3_425087_600x0_resize_box_2.png 600w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/01_hu35b83139b4b9a667c482960666e96ba3_425087_800x0_resize_box_2.png 1000w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/01_hu35b83139b4b9a667c482960666e96ba3_425087_1000x0_resize_box_2.png 1200w,
                    

                    /blog/boot-camp-on-external-drive/images/01.png
                    " 
                />
                
                <img alt="DiskUtility - Format Disk Settings" 
                        src="/blog/boot-camp-on-external-drive/images/01.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Disk Utility - Format Disk</span>
    </span>
</span></a></li>
<li>Make a note of the Disk Id. In my case it was <code>disk5</code></li>
<li>Create a new Windows 10 Virtual Machine under VMware Fusion.</li>
<li>Delete the default Disk the VMware Fusion creates when setting up the machine.</li>
<li>Exit VMware Fusion and launch Terminal and run the following command. Adjust the Virtual Manchine path as needed.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-zsh" data-lang="zsh">/Applications/VMware<span class="se">\ </span>Fusion.app/Contents/Library/vmware-rawdiskCreator <span class="se">\
</span><span class="se"></span>create /dev/disk5 <span class="se">\
</span><span class="se"></span>fullDevice ~/Virtual<span class="se">\ </span>Machines.localized/Boot<span class="se">\ </span>Camp.vmwarevm/external-hdd <span class="se">\
</span><span class="se"></span>ide
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Open <code>Boot Camp.vmx</code> file in a text editor like Visual Studio Code and add the below lines.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">ide1:0.present</span> <span class="o">=</span> <span class="s">&#34;TRUE&#34;</span>
<span class="na">ide1:0.fileName</span> <span class="o">=</span> <span class="s">&#34;external-hdd.vmdk&#34;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>If you are running macOS Catalina you will need to give <code>Full Disk Access</code> Permissions to <code>com.vmware.DiskHelper</code>. If you do not see it in the list. Try to start the Virtual Machine. You will get an error starting after which the item will show up in the list.


<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/02.png">
            <picture>

                    <source 
                        srcset="
                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hue427cd9cd612b4146ee4473fcbd27411_373608_400x0_resize_box_2.png 400w,
                        
                        
                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hue427cd9cd612b4146ee4473fcbd27411_373608_600x0_resize_box_2.png 600w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hue427cd9cd612b4146ee4473fcbd27411_373608_800x0_resize_box_2.png 1000w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hue427cd9cd612b4146ee4473fcbd27411_373608_1000x0_resize_box_2.png 1200w,
                        

                        /blog/boot-camp-on-external-drive/images/Dark/02.png
                        "
                        media="(prefers-color-scheme: dark)"
                    /><source 
                    srcset="
                    
                    /blog/boot-camp-on-external-drive/images/02_hu423960d78e17f636e1808ef9e342d8c7_393400_400x0_resize_box_2.png 400w,
                    
                    
                    
                    /blog/boot-camp-on-external-drive/images/02_hu423960d78e17f636e1808ef9e342d8c7_393400_600x0_resize_box_2.png 600w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/02_hu423960d78e17f636e1808ef9e342d8c7_393400_800x0_resize_box_2.png 1000w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/02_hu423960d78e17f636e1808ef9e342d8c7_393400_1000x0_resize_box_2.png 1200w,
                    

                    /blog/boot-camp-on-external-drive/images/02.png
                    " 
                />
                
                <img alt="Security &amp;amp; Privacy - Full Disk Access" 
                        src="/blog/boot-camp-on-external-drive/images/02.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Security & Privacy - Full Disk Access</span>
    </span>
</span></a></li>
<li>Quit and Restart VMWare fusion. Start the Boot Camp vm. You will be prompted for you admin password.</li>
<li>Once the VM starts boot off the Windows 10 ISO and install Windows 10 on the attached disk. Delete all partitions on the disk during install and let windows create new partitions as needed.</li>
<li>Once the install is fully finished, install VMware Tools to help facilitate copying of files.</li>
<li>On the Mac launch <code>Boot Camp Assistant.app</code>. From the <code>Action</code> menu select <code>Download Windows Support Software</code>. Follow the steps to get the Boot Camp windows drivers.</li>
<li>Copy the Drivers to the Windows machine. Shutdown the VM.</li>
<li>You may now reboot into the windows partition by rebooting the Mac and holding down the Option key during boot.</li>
<li>After Windows boots up, you will have to install the Boot Camp drivers by launching BootCamp setup from the <code>WindowsSupport\BootCamp\Setup.exe</code> folder.</li>
</ul>
<h6 id="additional-steps">Additional Steps</h6>
<ul>
<li>After installation of the Boot Camp drivers and reboot, Windows still had a few missing drivers under Device Manager. All I had to do was select <code>Update Driver</code> and select the <code>WindowsSupport\$WinPEDriver$</code> folder to look for drivers.</li>
<li>Speakers were not working properly on the 2019 iMac even though all drivers were installed. I had to go to <code>Device Manager</code>-&gt;<code>Sound, video and game controllers</code>-&gt;<code>High Definition Audio Device</code>. Select Update driver and point it to <code>WindowsSupport\$WinPEDriver$\Cirrus</code>. This installed the correct drivers and the Speakers started working.</li>
<li>Another speed bump I ran into was that after a few Windows updates were applied windows declined to update to the November 2019 update stating installing Windows on External USB is unsupported. 😒 I had to go to the Registry at <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control</code> and set the <code>PortableOperatingSystem</code> value to <code>0</code> and reboot. After that the update installed ok. 😏</li>
</ul></article><section class="article labels"><a class="category" href=/categories/how-tos/>How Tos</a><a class="tag" href=/tags/bootcamp/>Bootcamp</a><a class="tag" href=/tags/virtual-machine/>Virtual Machine</a></section></div><section class="article navigation"><p><a class="link" href="/blog/catalina-and-skype-for-business-screensharing/"><span class="li">&larr;</span>Catalina and Skype for Business Screensharing</a></p></section></div><section id="footer" class="footer"><div class="footer-wrap">
    <p class="copyright">© Copyright 2021, Hiren Patel</p>
    
    <p class="disclaimer">Disclaimer: The opinions expressed herein are my own personal opinions and do not represent my employer’s view in any way.</p>
    
</div></section>
    
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
        data-cf-beacon='{"token": "0ceb2b0172264816ba290291f3b99e4f"}'></script>
    
</div>
</body>

</html>