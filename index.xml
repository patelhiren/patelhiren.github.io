<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Hiren Patel</title>
    <link>https://patelhiren.com/</link>
    <description>Recent content on Hiren Patel</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>¬© Copyright {year}, Hiren Patel</copyright>
    <lastBuildDate>Fri, 27 Feb 2026 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://patelhiren.com/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Building the Weather-NWS Skill for OpenClaw</title>
      <link>https://patelhiren.com/blog/building-weather-nws-skill-openclaw/</link>
      <pubDate>Fri, 27 Feb 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/building-weather-nws-skill-openclaw/</guid>
      <description>&lt;p&gt;I wanted snow accumulation forecasts from OpenClaw, but the wttr.in skill only returned &amp;ldquo;Heavy snow&amp;rdquo; text. I needed: how much snow, when it starts. I discovered the National Weather Service API‚Äîfree, no API key, US-only‚Äîand built a unified skill with AirNow AQI and global fallback.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I wanted snow accumulation forecasts from OpenClaw, but the wttr.in skill only returned &ldquo;Heavy snow&rdquo; text. I needed: how much snow, when it starts. I discovered the National Weather Service API‚Äîfree, no API key, US-only‚Äîand built a unified skill with AirNow AQI and global fallback.</p>
<h2 id="discovery-nws-api">Discovery: NWS API</h2>
<p>The <a href="https://api.weather.gov/"target="_blank" rel="noopener noreferrer">National Weather Service API</a> returns structured data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;snowfallAmount&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;values&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&#34;validTime&#34;</span><span class="p">:</span> <span class="s2">&#34;2026-02-27T18:00:00/PT24H&#34;</span><span class="p">,</span> <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mi">13</span><span class="p">}],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;unitCode&#34;</span><span class="p">:</span> <span class="s2">&#34;wmoUnit:mm&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>No API key required. Requests against <code>api.weather.gov</code> just work. But it&rsquo;s US-only‚Äîinternational locations need <a href="https://wttr.in/"target="_blank" rel="noopener noreferrer">wttr.in</a> fallback.</p>
<p>Gridpoint API (<code>/gridpoints/{wfo}/{x},{y}</code>) has structured snow/ice/rain values. Zone forecast API is less detailed. Grid lookup requires geocoding first via <code>/points/{lat},{lon}</code>.</p>
<p>Later I discovered <a href="https://www.airnow.gov/"target="_blank" rel="noopener noreferrer">AirNow</a> AQI‚Äîalso no API key. Useful when deciding if post-storm shoveling is safe.</p>
<h2 id="api-hierarchy">API Hierarchy</h2>
<p>The skill auto-detects source based on location:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">if</span> <span class="n">is_us_location</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">get_nws_data</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>  <span class="c1"># Structured accumulations</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">get_wttr_data</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>     <span class="c1"># Text fallback</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="temporal-query-detection">Temporal Query Detection</h2>
<p>wttr.in returns day summaries. I wanted hourly breakdowns for &ldquo;What time does the rain stop?&rdquo;</p>
<p>The skill detects time qualifiers:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">strip_temporal_qualifiers</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+at\s+\d{1,2}\s*(?::\d</span><span class="si">{2}</span><span class="s1">)?\s*[APap][Mm]?&#39;</span><span class="p">,</span>  <span class="c1"># &#34;at 8 PM&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+around\s+\d{1,2}&#39;</span><span class="p">,</span>                            <span class="c1"># &#34;around 3&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+this\s+(?:morning|afternoon|evening)&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="sa">r</span><span class="s1">&#39;\s+tonight&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>When detected, it queries <code>/gridpoints/{wfo}/{x},{y}/forecast/hourly</code> instead‚Äî156 hourly periods (~7 days).</p>
<h2 id="phase-implementation">Phase Implementation</h2>
<h3 id="phase-1-core-with-grid-data">Phase 1: Core with Grid Data</h3>
<p><code>get_weather.py</code> orchestrates the unified call:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Seattle&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Script flow:</p>
<ol>
<li>Geocode via NWS <code>/points</code> endpoint for grid ID and forecast URLs</li>
<li>Fetch structured forecast or hourly if temporal detected</li>
<li>If <code>--aqi</code> flag, fetch AirNow current + forecast</li>
<li>For non-US locations, hit wttr.in</li>
</ol>
<h3 id="phase-2-station-observations">Phase 2: Station Observations</h3>
<p>NWS has observed conditions at weather stations. Added <code>--current</code> flag to compare forecast vs reality:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="c1">// /stations/{stationId}/observations/latest
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;properties&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;temperature&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="nt">&#34;unitCode&#34;</span><span class="p">:</span> <span class="s2">&#34;wmoUnit:degC&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;windSpeed&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mf">5.14</span><span class="p">,</span> <span class="nt">&#34;unitCode&#34;</span><span class="p">:</span> <span class="s2">&#34;wmoUnit:km_h-1&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="phase-3-edge-cases">Phase 3: Edge Cases</h3>
<ul>
<li><strong>Aviation TAFs</strong>: Terminal forecasts via <code>/stations/{stationId}/tafs</code>. Most civilian stations lack TAF‚Äîuse <code>--taf</code> explicitly</li>
<li><strong>Astronomical</strong>: Sunrise/sunset via <code>skyfield</code> library with <code>--astro</code></li>
<li><strong>Fire weather</strong>: Red flag warnings from NWS alerts API with <code>--fire</code></li>
</ul>
<h2 id="declaring-environment-variables">Declaring Environment Variables</h2>
<p><a href="https://clawhub.ai/"target="_blank" rel="noopener noreferrer">Clawdhub.ai</a> validates skills before listing. Skills using environment variables must declare them in <code>SKILL.md</code> metadata or get flagged as suspicious.</p>
<p>Added the <code>clawdis</code> block to register <code>AIRNOW_API_KEY</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span>{<span class="s2">&#34;clawdhub&#34;</span><span class="p">:</span>{<span class="s2">&#34;emoji&#34;</span><span class="p">:</span><span class="s2">&#34;üå¶Ô∏è&#34;</span>}<span class="p">,</span><span class="s2">&#34;clawdis&#34;</span><span class="p">:</span>{<span class="s2">&#34;envVars&#34;</span><span class="p">:[</span>{<span class="s2">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;AIRNOW_API_KEY&#34;</span><span class="p">,</span><span class="s2">&#34;required&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&#34;description&#34;</span><span class="p">:</span><span class="s2">&#34;AirNow API Key for AQI lookup&#34;</span>}<span class="p">]</span>}}<span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>This tells the validation system:</p>
<ul>
<li>The skill accepts an optional <code>AIRNOW_API_KEY</code> environment variable</li>
<li>It&rsquo;s not required‚ÄîAirNow works unauthenticated with stricter rate limits</li>
<li>OpenClaw injects the variable if configured in <code>clawdbot.json</code></li>
</ul>
<h2 id="usage">Usage</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Standard forecast</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Boston&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Hourly with AQI</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Boston at 8 PM&#34;</span> --aqi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Current observations vs forecast</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;Boston&#34;</span> --current
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Aviation TAF (if available)</span>
</span></span><span class="line"><span class="cl">./scripts/get_weather.py <span class="s2">&#34;JFK&#34;</span> --taf
</span></span></code></pre></td></tr></table>
</div>
</div><p>Available on <a href="https://clawhub.ai/patelhiren/weather-nws"target="_blank" rel="noopener noreferrer">clawdhub.ai/patelhiren/weather-nws</a>.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Using macOS newsyslog to Rotate Service Logs</title>
      <link>https://patelhiren.com/blog/macos-newsyslog-openclaw-logs/</link>
      <pubDate>Wed, 25 Feb 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/macos-newsyslog-openclaw-logs/</guid>
      <description>&lt;p&gt;I noticed my &lt;a href=&#34;https://clawd.bot/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OpenClaw&lt;/a&gt; gateway log files were growing unbounded. The service runs via &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;launchd&lt;/a&gt;, and while the app has built-in log rotation, the stdout/stderr capture in the launchd plist was bypassing it entirely.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I noticed my <a href="https://clawd.bot/"target="_blank" rel="noopener noreferrer">OpenClaw</a> gateway log files were growing unbounded. The service runs via <a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html"target="_blank" rel="noopener noreferrer">launchd</a>, and while the app has built-in log rotation, the stdout/stderr capture in the launchd plist was bypassing it entirely.</p>
<h2 id="the-problem">The Problem</h2>
<p>When a macOS service uses <code>StandardOutPath</code> and <code>StandardErrorPath</code> in its launchd plist, those files just append forever. My logs had grown to 38MB with no mechanism to clean them up:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -lh ~/.openclaw/logs/
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff  3.9M Feb <span class="m">25</span> 17:48 gateway.log
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff  38M  Feb <span class="m">25</span> 17:48 gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>OpenClaw&rsquo;s internal logger writes date-based rotating logs to <code>/tmp/openclaw/</code>, but launchd&rsquo;s stdout capture writes directly to the configured files, bypassing that rotation logic.</p>
<p><strong>The Hidden Trap:</strong> When log rotation tools like <code>newsyslog</code> create new log files, they default to <code>root:root</code> ownership. If your launchd service runs as your user (not root), it suddenly can&rsquo;t write to its own log files after rotation. The daemon fails to start with &ldquo;Permission denied&rdquo; errors, and you&rsquo;re left wondering why your service won&rsquo;t start.</p>
<h2 id="the-solution-newsyslog">The Solution: newsyslog</h2>
<p>macOS includes <a href="https://www.freebsd.org/cgi/man.cgi?newsyslog%288%29"target="_blank" rel="noopener noreferrer">newsyslog</a>, a utility for managing log file rotation. It&rsquo;s already running on your system, checking logs periodically via launchd. You just need to tell it about your custom log files.</p>
<h3 id="configuration">Configuration</h3>
<p>Create a config file for your service logs:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo tee /etc/newsyslog.d/openclaw.conf <span class="s">&lt;&lt; &#39;EOF&#39;
</span></span></span><span class="line"><span class="cl"><span class="s"># OpenClaw gateway logs - rotate at 10MB, keep zero archives
</span></span></span><span class="line"><span class="cl"><span class="s">/Users/clawd/.openclaw/logs/gateway.log    clawd:staff    644  0  10000  *  B
</span></span></span><span class="line"><span class="cl"><span class="s">/Users/clawd/.openclaw/logs/gateway.err.log    clawd:staff    644  0  10000  *  B
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Important:</strong> Notice the <code>clawd:staff</code> owner:group fields. Without these, newsyslog creates the new log files as <code>root:root</code> after rotation. When your launchd service tries to write to a root-owned file, it gets &ldquo;Permission denied&rdquo; and the daemon fails to start.</p>
<p>Field breakdown:</p>
<ul>
<li><code>clawd:staff</code> ‚Äî Owner and group for the log files (critical!)</li>
<li><code>644</code> ‚Äî File permissions (owner read/write, others read-only)</li>
<li><code>0</code> ‚Äî Number of archived files to keep (zero = just truncate)</li>
<li><code>10000</code> ‚Äî Size threshold in KB (~10MB)</li>
<li><code>*</code> ‚Äî Rotate at any time (not just specific hours)</li>
<li><code>B</code> ‚Äî Treat as binary (no special encoding)</li>
</ul>
<h3 id="what-happens-without-owner-specified">What Happens Without Owner Specified</h3>
<p>If you omit the owner:group fields, you&rsquo;ll see this after newsyslog runs:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -la ~/.openclaw/logs/
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> root   wheel     <span class="m">0</span> Feb <span class="m">25</span> 18:30 gateway.log
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> root   wheel     <span class="m">0</span> Feb <span class="m">25</span> 18:30 gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then your service fails to start with errors like:</p>
<pre tabindex="0"><code>Could not open log file /Users/clawd/.openclaw/logs/gateway.log: Permission denied
Service exited with abnormal code: 1
</code></pre><p>The <code>clawd:staff</code> fields ensure the rotated files remain owned by your user, not root.</p>
<h3 id="reload-and-verify">Reload and Verify</h3>
<p>Tell newsyslog to reload its configuration:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo killall -HUP newsyslog
</span></span></code></pre></td></tr></table>
</div>
</div><p>Check that the config loaded correctly:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo newsyslog -v -f /etc/newsyslog.d/openclaw.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>Force an immediate rotation to test:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo newsyslog -v -f /etc/newsyslog.d/openclaw.conf -R <span class="s2">&#34;manual&#34;</span> ~/.openclaw/logs/gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Note:</strong> The <code>-R</code> flag with a requestor name is optional. Plain <code>newsyslog -v -f /path/to/config</code> works fine for testing.</p>
</blockquote>
<h2 id="why-not-cron">Why Not Cron?</h2>
<p>I considered a simple cron job:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">0</span> <span class="m">3</span> * * * truncate -s <span class="m">0</span> ~/.openclaw/logs/gateway.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>That would work, but newsyslog is the native macOS tool for this. It&rsquo;s already running, already has permission handling figured out, and rotates based on file size rather than just time. If your log suddenly explodes to 500MB, newsyslog catches it on the next check cycle (every 30 minutes). Cron would wait until 3 AM.</p>
<h2 id="result">Result</h2>
<p>After setup, my 38MB error log was truncated to zero bytes:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -lh ~/.openclaw/logs/
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff  4.9M Feb <span class="m">25</span> 18:02 gateway.log
</span></span><span class="line"><span class="cl">-rw-r--r--  <span class="m">1</span> clawd  staff   0B  Feb <span class="m">25</span> 18:10 gateway.err.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>No manual intervention needed going forward. When either file crosses 10MB, newsyslog truncates it automatically.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.freebsd.org/cgi/man.cgi?newsyslog%288%29"target="_blank" rel="noopener noreferrer">newsyslog man page</a></li>
<li><a href="https://docs.openclaw.ai/"target="_blank" rel="noopener noreferrer">OpenClaw documentation</a></li>
<li><a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html"target="_blank" rel="noopener noreferrer">launchd documentation</a></li>
</ul>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Tag-Teaming Claude Code with an AI Agent via Tmux</title>
      <link>https://patelhiren.com/blog/tag-teaming-claude-code-with-ai-agent/</link>
      <pubDate>Thu, 22 Jan 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/tag-teaming-claude-code-with-ai-agent/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://claude.ai/code&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Claude Code&lt;/a&gt; is an impressive CLI that brings sophisticated AI-assisted coding directly into the terminal. Its TUI (Text User Interface) provides rich feedback through interactive menus, progress bars, and side-by-side diffs. However, long-running tasks present a challenge: if you need to step away from your computer, the session momentum is often lost.&lt;/p&gt;
&lt;p&gt;To solve this, I‚Äôve developed a workflow using &lt;a href=&#34;https://github.com/tmux/tmux/wiki&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Tmux&lt;/a&gt; as a shared terminal state. This allows me to hand off a live session to my &lt;a href=&#34;https://clawd.bot/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Clawdbot&lt;/a&gt; agent and, conversely, take over a session that the agent started. It also provides a mechanism to optionally switch between different account tokens (such as a work account) on the fly.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p><a href="https://claude.ai/code"target="_blank" rel="noopener noreferrer">Claude Code</a> is an impressive CLI that brings sophisticated AI-assisted coding directly into the terminal. Its TUI (Text User Interface) provides rich feedback through interactive menus, progress bars, and side-by-side diffs. However, long-running tasks present a challenge: if you need to step away from your computer, the session momentum is often lost.</p>
<p>To solve this, I‚Äôve developed a workflow using <a href="https://github.com/tmux/tmux/wiki"target="_blank" rel="noopener noreferrer">Tmux</a> as a shared terminal state. This allows me to hand off a live session to my <a href="https://clawd.bot/"target="_blank" rel="noopener noreferrer">Clawdbot</a> agent and, conversely, take over a session that the agent started. It also provides a mechanism to optionally switch between different account tokens (such as a work account) on the fly.</p>
<h2 id="the-core-concept-persistence">The Core Concept: Persistence</h2>
<p>The strategy relies on Tmux sessions to maintain a persistent terminal state in memory. By using named sessions, both the human and the AI agent can attach to and drive the exact same process. This ensures zero context loss when switching between &ldquo;manual&rdquo; and &ldquo;agent&rdquo; mode.</p>
<h2 id="configuration-storing-account-profiles">Configuration: Storing Account Profiles</h2>
<p>To enable the agent to switch accounts, you can store secondary tokens in the <code>coding-agent</code> skill section of <code>clawdbot.json</code>. Using simple shorthand keys makes it easier to request them from a phone.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;skills&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;entries&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;coding-agent&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;env&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;CC_ACC2_TOKEN&#34;</span><span class="p">:</span> <span class="s2">&#34;your-token-here&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="workflow-1-human-to-agent-hand-off">Workflow 1: Human to Agent Hand-off</h2>
<p>When I am working at my desk and need to step away, I follow these steps:</p>
<ol>
<li>
<p><strong>Start a named Tmux session</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tmux new -s hiren-claude
</span></span><span class="line"><span class="cl">claude
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Pro-Tip</strong>: If you want to launch manually with a specific account token, use the <code>env</code> prefix within the Tmux command string to ensure the environment variable is correctly injected into the background session:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tmux new -s hiren-claude -d <span class="s2">&#34;env CLAUDE_CODE_OAUTH_TOKEN=&#39;your-token&#39; claude&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p><strong>Request Hand-off</strong>: From WhatsApp, I tell the agent:</p>
<blockquote>
<p>&ldquo;Take over session <code>hiren-claude</code>. Finish the refactor.&rdquo;</p>
</blockquote>
</li>
</ol>
<h3 id="environment-inheritance">Environment Inheritance</h3>
<p>If I start a session at my desk using <code>export CLAUDE_CODE_OAUTH_TOKEN=...</code>, the agent inherits that environment automatically when it takes over the Tmux pane. Keystrokes sent by the agent will be processed within that authenticated shell.</p>
<h2 id="workflow-2-agent-to-human-take-over">Workflow 2: Agent to Human Take-over</h2>
<p>The hand-off also works in reverse. I can have the agent start a complex task while I am away:</p>
<h3 id="default-account-example">Default Account Example</h3>
<p>I can instruct the agent to start a new run using my default CLI login:</p>
<blockquote>
<p>&ldquo;Start a new session <code>hiren-claude</code> and begin refactoring the database schema.&rdquo;</p>
</blockquote>
<p>Behind the scenes, the agent runs <code>tmux new -s hiren-claude -d &quot;claude '...'&quot;</code>.</p>
<h3 id="specific-account-example">Specific Account Example</h3>
<p>If I want the agent to use a specific account profile from the config:</p>
<blockquote>
<p>&ldquo;Start a new session <code>hiren-claude</code> using <code>cc-acc2-token</code> and fix the memory leak.&rdquo;</p>
</blockquote>
<p>The agent then prepends the token to the execution, mapping the <code>CC_ACC2_TOKEN</code> from the config to the <code>CLAUDE_CODE_OAUTH_TOKEN</code> required by the CLI.</p>
<h3 id="human-take-over">Human Take-over</h3>
<p>When I return to my computer, I can attach to the session and take full control immediately:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tmux attach -t hiren-claude
</span></span></code></pre></td></tr></table>
</div>
</div><p>Because Tmux lives in the background, this works even if the screen is locked, provided the computer remains awake.</p>
<h2 id="benefits-of-the-tmux-bridge">Benefits of the Tmux Bridge</h2>
<ul>
<li><strong>Full TUI Support</strong>: Standard stdin/stdout redirection often breaks the interactive elements of Claude Code. Using Tmux preserves the full visual experience.</li>
<li><strong>Real-time Monitoring</strong>: I can &ldquo;spectate&rdquo; the work by attaching to the session via SSH from a mobile device or another terminal.</li>
<li><strong>Zero Friction</strong>: No need to re-authenticate or re-explain context when switching between human and AI control.</li>
</ul>
<h2 id="pro-tip-smooth-scrolling-in-tmux">Pro-Tip: Smooth Scrolling in Tmux</h2>
<p>One common frustration when using Claude Code inside Tmux is scrolling. By default, using the mouse wheel might send &ldquo;Up/Down&rdquo; arrow keys, which moves the text in the entry box rather than scrolling the terminal history.</p>
<p>To fix this, you can enable <strong>Mouse Mode</strong>. Add the following to your <code>~/.tmux.conf</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">set</span> -g mouse on
</span></span></code></pre></td></tr></table>
</div>
</div><p>With this enabled, you can scroll through Claude&rsquo;s responses naturally. If you don&rsquo;t want to enable global mouse mode, you can always enter <strong>Copy Mode</strong> manually by pressing <code>Ctrl-b</code> then <code>[</code>. Once in copy mode, you can scroll freely; just press <code>q</code> to return to the prompt.</p>
<h2 id="execution-reminders">Execution Reminders</h2>
<ul>
<li><strong>Installation</strong>: Ensure <code>tmux</code> is installed via <a href="https://brew.sh/"target="_blank" rel="noopener noreferrer">Homebrew</a> (<code>brew install tmux</code>).</li>
<li><strong>Naming</strong>: Use consistent session names so the agent knows where to look.</li>
<li><strong>Power Settings</strong>: Configure your Mac to stay awake when the display is off to ensure the Tmux server remains active.</li>
</ul>
<p>By treating the terminal as a shared space, I‚Äôve turned my AI agent into a true tag-team partner. We can hot-swap control of the keyboard and switch accounts on the fly without ever losing the &ldquo;zone.&rdquo;</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Deploying a Sandboxed Family Agent with Cross-Compiled Go Skills in Clawdbot</title>
      <link>https://patelhiren.com/blog/deploying-sandboxed-family-agent-clawdbot/</link>
      <pubDate>Mon, 19 Jan 2026 00:00:00 +0000</pubDate>
      
      <guid>https://patelhiren.com/blog/deploying-sandboxed-family-agent-clawdbot/</guid>
      <description>&lt;p&gt;I wanted to set up a &amp;ldquo;Family Agent&amp;rdquo; in &lt;a href=&#34;https://clawd.bot/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Clawdbot&lt;/a&gt; so my family could interact with tools like stock analysis and summarization via WhatsApp. However, I needed to ensure this agent was completely isolated from my personal credentials and host system. Here is how I configured a sandboxed environment and deployed cross-compiled &lt;a href=&#34;https://go.dev/&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Go&lt;/a&gt; skills to solve this.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I wanted to set up a &ldquo;Family Agent&rdquo; in <a href="https://clawd.bot/"target="_blank" rel="noopener noreferrer">Clawdbot</a> so my family could interact with tools like stock analysis and summarization via WhatsApp. However, I needed to ensure this agent was completely isolated from my personal credentials and host system. Here is how I configured a sandboxed environment and deployed cross-compiled <a href="https://go.dev/"target="_blank" rel="noopener noreferrer">Go</a> skills to solve this.</p>
<h2 id="customizing-the-sandbox-image">Customizing the Sandbox Image</h2>
<p>Because some skills have specific runtime requirements‚Äîlike the <code>summarize</code> skill needing Node.js 20+ to support newer regular expression flags‚ÄîI created a custom <a href="https://www.docker.com/"target="_blank" rel="noopener noreferrer">Docker</a> image. Using a default image with Node.js v18 resulted in a <code>SyntaxError</code> when the tool&rsquo;s dependencies tried to load, so &ldquo;baking in&rdquo; the correct runtime was the first step.</p>
<h3 id="the-dockerfile">The Dockerfile</h3>
<p>I used a <code>node:20-slim</code> base to ensure all modern Node dependencies were supported:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="s">node:20-slim</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="c"># Install system dependencies</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\
</span></span></span><span class="line"><span class="cl">    curl <span class="se">\
</span></span></span><span class="line"><span class="cl">    ca-certificates <span class="se">\
</span></span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Building the image is a one-time task:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t <span class="o">[</span>YOUR_DOCKER_IMAGE<span class="o">]</span>:1.0 .
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cross-compiling-go-binaries-for-multi-platform-support">Cross-Compiling Go Binaries for Multi-Platform Support</h2>
<p>To keep the agent high-performance, I wrote my custom skills (like <code>stock-analysis</code>) in Go. The beauty of Go is the ability to test locally on my M1 Max (<code>darwin/arm64</code>) and then cross-compile for the sandboxed Linux environment.</p>
<p>By producing a single binary for each platform and placing them in the <code>dist/</code> folder of the skill, the agent can run the correct version regardless of the environment.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Build for macOS (Local Testing)</span>
</span></span><span class="line"><span class="cl"><span class="nv">GOOS</span><span class="o">=</span>darwin <span class="nv">GOARCH</span><span class="o">=</span>arm64 go build -o dist/stock-analysis main.go
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for Linux (Sandbox Deployment)</span>
</span></span><span class="line"><span class="cl"><span class="nv">GOOS</span><span class="o">=</span>linux <span class="nv">GOARCH</span><span class="o">=</span>arm64 go build -o dist/stock-analysis-linux main.go
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="bridging-the-llm-and-code-with-skillmd">Bridging the LLM and Code with <code>SKILL.md</code></h2>
<p>Clawdbot uses a <code>SKILL.md</code> file to discover these binaries and understand how to use them. This file acts as the bridge between the LLM‚Äôs natural language and the Go code. For the stock analysis tool, I defined mandatory rules to ensure the agent returns the raw <code>stdout</code> verbatim, which is critical for trading data fidelity.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gu">### Command
</span></span></span><span class="line"><span class="cl"><span class="gh"># macOS / Darwin
</span></span></span><span class="line"><span class="cl">stock-analysis &lt;TICKER&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gh"># Linux / Sandbox
</span></span></span><span class="line"><span class="cl">stock-analysis-linux &lt;TICKER&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="configuring-the-agent-and-docker-sandbox">Configuring the Agent and Docker Sandbox</h2>
<p>With the image built and skills compiled, I defined the <code>family</code> agent in <code>clawdbot.json</code>. Setting the sandbox mode to <code>all</code> forces every tool execution into the Docker container.</p>
<p>Crucially, because skills like <code>summarize</code> and <code>stock-analysis</code> need to reach out to external APIs and websites, I had to explicitly grant the sandbox internet access by setting the Docker network to <code>bridge</code> mode.</p>
<h3 id="the-agent-json-structure">The Agent JSON Structure</h3>
<p>The <code>env</code> block and <code>sandbox</code> settings live directly within the agent&rsquo;s definition. Here is the full structure for the <code>family</code> agent:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;family&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;family&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;env&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ANTHROPIC_API_KEY&#34;</span><span class="p">:</span> <span class="s2">&#34;{{auth:[YOUR_ANTHROPIC_PROFILE]}}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;GEMINI_API_KEY&#34;</span><span class="p">:</span> <span class="s2">&#34;{{auth:[YOUR_GEMINI_PROFILE]}}&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;workspace&#34;</span><span class="p">:</span> <span class="s2">&#34;[WORKSPACE_PATH]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;sandbox&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;all&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;workspaceAccess&#34;</span><span class="p">:</span> <span class="s2">&#34;rw&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;scope&#34;</span><span class="p">:</span> <span class="s2">&#34;agent&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;docker&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;image&#34;</span><span class="p">:</span> <span class="s2">&#34;[YOUR_DOCKER_IMAGE]:1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;network&#34;</span><span class="p">:</span> <span class="s2">&#34;bridge&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;tools&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sandbox&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;tools&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;allow&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;exec&#34;</span><span class="p">,</span> <span class="s2">&#34;bash&#34;</span><span class="p">,</span> <span class="s2">&#34;read&#34;</span><span class="p">,</span> <span class="s2">&#34;write&#34;</span><span class="p">,</span> <span class="s2">&#34;summarize&#34;</span><span class="p">,</span> <span class="s2">&#34;stock-analysis&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I then bound this agent to a specific WhatsApp group ID so it only responds to family requests:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;bindings&#34;</span><span class="err">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;agentId&#34;</span><span class="p">:</span> <span class="s2">&#34;family&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;channel&#34;</span><span class="p">:</span> <span class="s2">&#34;whatsapp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;peer&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;kind&#34;</span><span class="p">:</span> <span class="s2">&#34;group&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;[YOUR_GROUP_ID]@g.us&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="lessons-learned">Lessons Learned</h2>
<h3 id="1-secure-credential-injection">1. Secure Credential Injection</h3>
<p>A key security feature of the sandbox is that it starts with a clean slate. By checking the sandbox logs, I could see that tools were failing because they lacked API keys. To fix this, I used explicit environment mapping in the JSON config.</p>
<p>You must map the <strong>specific environment variables</strong> that your skills expect (like <code>GEMINI_API_KEY</code> or <code>ANTHROPIC_API_KEY</code>) to your secure Clawdbot authentication profiles inside the <code>env</code> block shown in the configuration section above.</p>
<p>This ensures the agent is &ldquo;least privileged&rdquo;‚Äîit only has the specific tokens it needs to run its assigned skills.</p>
<h2 id="pro-tip-refreshing-the-sandbox">Pro-Tip: Refreshing the Sandbox</h2>
<p>Clawdbot creates the Docker container for the agent only one time. It persists across restarts for speed. If you need to force a clean slate or pick up changes in your custom image, simply delete the running container:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker rm -f <span class="o">[</span>CONTAINER_ID<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Clawdbot will automatically recreate the container from the image on the next request.</p>
<h2 id="wrapping-up">Wrapping Up</h2>
<p>By using Docker for isolation, enabling bridge networking for internet access, and cross-compiling Go binaries for both macOS and Linux, I‚Äôve created a setup that is both high-performance and secure. This configuration allows my family to benefit from agentic workflows while maintaining strict control over credential access and runtime environments.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Fixing File Associations on macOS Sequoia</title>
      <link>https://patelhiren.com/blog/fixing-file-associations-on-macos-sequoia/</link>
      <pubDate>Fri, 25 Oct 2024 19:50:11 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/fixing-file-associations-on-macos-sequoia/</guid>
      <description>&lt;p&gt;After upgrading to macOS Sequoia (15.0), my QFX files would not open correctly in &lt;em&gt;&lt;a href=&#34;https://www.banktivity.com&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Banktivity&lt;/a&gt;&lt;/em&gt;. Banktivity would not show as an option in &lt;em&gt;Open With&lt;/em&gt; in the File Info panel. I ended up having to use &lt;em&gt;lsregister&lt;/em&gt; utility to fix the association manually.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>After upgrading to macOS Sequoia (15.0), my QFX files would not open correctly in <em><a href="https://www.banktivity.com"target="_blank" rel="noopener noreferrer">Banktivity</a></em>. Banktivity would not show as an option in <em>Open With</em> in the File Info panel. I ended up having to use <em>lsregister</em> utility to fix the association manually.</p>
<p>The problem turned out to be that macOS Launch Services db had references to older versions of Banktivity that were no longer installed. I had version 9 installed, but it had assoications registered to version 7, 8 and 9. I also found that my iOS device had both Banktivity 7 and Banktivity 9 installed. I belive this was causing conflicts on macOS because of iCloud File Sync. I found out the associated by running the below command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump <span class="p">|</span> grep -i <span class="s2">&#34;path:.*banktivity&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Output:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">path:                       /Users/\*\*\*/Library/Daemon Containers/\*\*\*/Data/Library/Caches/Placeholders-v2.noindex/com.iggsoftware.banktivity4-mobile-7.5.2/Banktivity 7.app (0x52f8)
</span></span><span class="line"><span class="cl">path:                       /Users/\*\*\*/Library/Daemon Containers/\*\*\*/Data/Library/Caches/Placeholders-v2.noindex/com.iggsoftware.banktivity-9.5.3/Banktivity.app (0x53a4)
</span></span><span class="line"><span class="cl">path:                       /Applications/Banktivity.app (0x6568)
</span></span></code></pre></td></tr></table>
</div>
</div><p>I unregistering all registered listed paths using the below command for each path.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -u <span class="s2">&#34;/Applications/Banktivity.app&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once I unregistered all. I registered the only valid path.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -R -f -v /Applications/Banktivity.app
</span></span></code></pre></td></tr></table>
</div>
</div><p>This fixed my QFX file associations for Banktivity.</p>
<p>PS: using the force cleanup of all file associations on Sequoia using the below command will fix the issue until a reboot. But it also breaks <em>System Settings</em>. None of the panels in <em>System Settings</em> load after running the below command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain <span class="nb">local</span> -domain system -domain user
</span></span></code></pre></td></tr></table>
</div>
</div><p>So I recommend not using this command.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Upgrading Portainer Community Edition on Docker</title>
      <link>https://patelhiren.com/blog/upgrading-portainer-ce-on-docker/</link>
      <pubDate>Sun, 19 Feb 2023 12:18:21 -0500</pubDate>
      
      <guid>https://patelhiren.com/blog/upgrading-portainer-ce-on-docker/</guid>
      <description>&lt;p&gt;I run a docker instance under Ubuntu server on my local network. This is how I upgrade portainer to the latest version.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I run a docker instance under Ubuntu server on my local network. This is how I upgrade portainer to the latest version.</p>
<p>Connect to the Ubuntu server via SSH and run the below commands.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Stop portainer</span>
</span></span><span class="line"><span class="cl">sudo docker stop portainer
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Remove existing container</span>
</span></span><span class="line"><span class="cl">sudo docker rm portainer
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Pull the latest portainer-ce image</span>
</span></span><span class="line"><span class="cl">sudo docker pull portainer/portainer-ce:latest
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create and start portainer using the latest image.</span>
</span></span><span class="line"><span class="cl">sudo docker run -d -p 8000:8000 -p 9000:9000 --name<span class="o">=</span>portainer --restart<span class="o">=</span>always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest
</span></span></code></pre></td></tr></table>
</div>
</div><p>This will upgrade portainer to the latest version. It should again be accessible at <code>http://&lt;&lt;server&gt;&gt;:9000</code>.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Set up Foscam Floodlight Camera in HomeKit</title>
      <link>https://patelhiren.com/blog/set-up-foscam-floodlight-camera-in-homekit/</link>
      <pubDate>Sun, 13 Nov 2022 16:32:58 -0500</pubDate>
      
      <guid>https://patelhiren.com/blog/set-up-foscam-floodlight-camera-in-homekit/</guid>
      <description>&lt;p&gt;The &lt;a href=&#34;https://www.amazon.com/Foscam-Floodlight-Detection-Brightness-FLC/dp/B095S3HVL4&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Foscam Floodlight Camera&lt;/a&gt; is competitively prized and has decent features including option to record 24/7 video locally to a micro sdcard without the need for a cloud subscription. It however does not support integration with HomeKit my preferred home automation platform. Here is how I setup the floodlight in HomeKit.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>The <a href="https://www.amazon.com/Foscam-Floodlight-Detection-Brightness-FLC/dp/B095S3HVL4"target="_blank" rel="noopener noreferrer">Foscam Floodlight Camera</a> is competitively prized and has decent features including option to record 24/7 video locally to a micro sdcard without the need for a cloud subscription. It however does not support integration with HomeKit my preferred home automation platform. Here is how I setup the floodlight in HomeKit.</p>
<p>Download and install the <a href="https://apps.apple.com/us/app/foscam-vms/id1521202507?mt=12"target="_blank" rel="noopener noreferrer">Foscam VMS</a> app from the Mac App Store. Signup and Signin to the Foscam Account.</p>
<p>We will also need the <a href="https://apps.apple.com/us/app/foscam/id924381688"target="_blank" rel="noopener noreferrer">Foscam</a> iOS app.</p>
<blockquote>
<p>We need both macOS and iOS apps because unfortunately certain settings are only available in the macOS app where others are only available in the iOS app.</p>
</blockquote>
<h2 id="foscam-vms-macos-app-settings">Foscam VMS (macOS) App Settings</h2>
<p>Once the camera is setup and available in the Foscam VMS app, goto the the camera settings by clicking the settings icon next to the camera name.</p>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/01.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/01_hu_773b19ee061b59e9.png 400w,
                    
                    
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/01_hu_e0c2a84500f14649.png 600w,
                    

                    

                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/01.png
                    " 
                />
                
                <img alt="Open Camera Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/01.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Open Camera Settings</span>
    </span>
</span></a></p>
<p>Set the settings like so:</p>
<h3 id="basic-settings">Basic Settings</h3>
<ul>
<li>Set Device name and Device time.</li>
<li>Disable Voice prompt.</li>
</ul>
<h3 id="video-settings">Video Settings</h3>
<ul>
<li>Set Video encode settings like below. Set both the Main stream and Sub stream settings like the one in the screenshot. You may choose to use QHD stream type if you prefer 2K resolution, however I found the response time to be slower in HomeKit with that.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/02.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/02_hu_e967a3df745a2655.png 400w,
                    
                    
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/02_hu_5f0892ff071d0809.png 600w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/02_hu_1374627ac368b204.png 1000w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/02_hu_875dce0e98a8ede4.png 1200w,
                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/02.png
                    " 
                />
                
                <img alt="Video encode Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/02.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Video Encode Settings</span>
    </span>
</span></a></p>
<ul>
<li>Set <em>On screen display</em> -&gt; <em>Display timestamp</em> to Yes.</li>
<li>Set <em>Privacy zone</em> -&gt; <em>Privacy zone</em> to Yes.</li>
</ul>
<blockquote>
<p>We are going to be using the <em>Privacy zone</em> to make the <em>On screen time display</em> readable. You can drag the privacy zone around the time area, but I found the drag operation to be very hard due to responsiveness issues. We will instead use Foscam CGI Command to set the privacy zone later in the section.</p>
</blockquote>
<ul>
<li>I found the default colors to be oversaturated so I tweaked the <em>Color adjustment</em> like below.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/03.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/03_hu_7dedb5b7b0214b87.png 400w,
                    
                    
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/03_hu_38724bddb5e05a35.png 600w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/03_hu_4c4edfd964c758a.png 1000w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/03_hu_8ce81ea707b79d78.png 1200w,
                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/03.png
                    " 
                />
                
                <img alt="Color Adjustment Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/03.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Color Adjustment Settings</span>
    </span>
</span></a></p>
<h3 id="detector-settings">Detector Settings</h3>
<ul>
<li>I found the camera&rsquo;s onboard motion detector to be too conservative for my liking so I disabled the <em>Motion Detection</em> &amp; <em>Sound Detection</em> under the <em>Detector</em> settings. The only setting turned on is the <em>PIR Detection</em>.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/04.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/04_hu_829d7ef50bcbc47c.png 400w,
                    
                    
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/04_hu_1fad6398ddd9596c.png 600w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/04_hu_1e4036fcf8842c0a.png 1000w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/04_hu_6f946e15f93d9184.png 1200w,
                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/04.png
                    " 
                />
                
                <img alt="PIR Detection Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/04.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">PIR Detection Settings</span>
    </span>
</span></a></p>
<h3 id="record-settings">Record Settings</h3>
<ul>
<li>Enable <em>SD card</em> option under <em>Record</em>.</li>
<li>Under <em>Schedule Recording</em> I enabled 24/7 Recording including Audio by tapping the <em>All</em> area in the <em>Schedule</em> table.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/05.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/05_hu_6599d8396401fd6.png 400w,
                    
                    
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/05_hu_1894f20ac842e04d.png 600w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/05_hu_d04cb69c5adbcc42.png 1000w,
                    

                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/05_hu_3fef3246ebc34f44.png 1200w,
                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/05.png
                    " 
                />
                
                <img alt="Record Schedule Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/05.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Record Schedule Settings</span>
    </span>
</span></a></p>
<p>Save and close the Camera Settings window.</p>
<h3 id="making-the-onscreen-time-readable">Making the Onscreen Time Readable</h3>
<p>By default the onscreen time has not background and so it is overlayed directly on the video. This makes the time in the video hard to read. In order to fix this we use the Privacy zone and setup a rectangle around the time. This way it will alway have a black background behind the time, improving readablity.</p>
<p>Run the below command adjusting values for the <code>camera-ip</code>, <code>camera-user-name</code>, and <code>camera-user-password</code> to setup the privacy rectangle behind time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">curl <span class="s2">&#34;http://&lt;&lt;camera-ip&gt;&gt;:88/cgi-bin/CGIProxy.fcgi?cmd=setOsdMaskArea&amp;x1_0=20&amp;y1_0=90&amp;x2_0=2080&amp;y2_0=450&amp;usr=&lt;&lt;camera-user-name&gt;&gt;&amp;pwd=&lt;&lt;camera-user-password&gt;&gt;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/06.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/06_hu_6269430fb159b36f.png 400w,
                    
                    
                    

                    

                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/06.png
                    " 
                />
                
                <img alt="Readable Time" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/06.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Readable Time</span>
    </span>
</span></a></p>
<h2 id="foscam-ios-app-settings">Foscam (iOS) App Settings</h2>
<ul>
<li>Load the Camera Settings by tapping the <em>&hellip;</em> button and tapping <em>Settings</em>.</li>
<li>Select <em>Advanced Settings</em>.</li>
<li>Automatic firmware updates are on by default. Disable them under <em>Smart Update</em>.</li>
<li>Enable <em>Onvif</em></li>
<li>Under <em>NVR Connection</em> Enable <em>NVR Model</em></li>
</ul>
<blockquote>
<p>When NVR and ONVIF are enabled, the stream switches to H264 which is required for HomeKit integration. Without that the default stream format is H265 which is incompatible with HomeKit.</p>
</blockquote>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/07.png">
            <picture><source 
                    srcset="
                    
                    
                    

                    

                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/07.png
                    " 
                />
                
                <img alt="Onvif Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/07.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Onvif Settings</span>
    </span>
</span></a>


<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/08.png">
            <picture><source 
                    srcset="
                    
                    
                    

                    

                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/08.png
                    " 
                />
                
                <img alt="NVR Connection Settings" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/08.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">NVR Connection Settings</span>
    </span>
</span></a></p>
<h2 id="adding-the-camera-to-scrypted">Adding the camera to Scrypted</h2>
<p>We will be using the excellent <a href="https://www.scrypted.app"target="_blank" rel="noopener noreferrer">Scrypted</a> platform to access this camera from HomeKit and also enable HomeKit Secure Video. I have Scrypted running in a Docker container on a Ubuntu server.</p>
<p>Under Scrypted install the below plugins.</p>
<ul>
<li><strong>HomeKit</strong> - For exposing camera to HomeKit</li>
<li><strong>RTSP Camera Plugin</strong> - For connecting to Foscam floodlight camera via RTSP stream.</li>
<li><strong>Open CV Motion Detection</strong> - To expose custom motion detection sensing via OpenCV so Home Hub can process motion and record clips to HomeKit Secure Video.</li>
<li><strong>Dummy Switch Plugin</strong> - To control the floodlight via HomeKit.</li>
</ul>
<h3 id="rtsp-camera-plugin-setup">RTSP Camera Plugin Setup</h3>
<ul>
<li>Navigate to <em>RTSP Camera Plugin</em> page and click <em>Add Device</em>.</li>
<li>Enter a name for your camera and click <em>Create</em></li>
<li>Under the newly loaded device page in the <em>General</em> tab, click the <em>Add</em> button so you have a place to enter two <em>RTSP Stream URL</em>. Enter the information for
<ul>
<li>Username - The camera username</li>
<li>Password - The camera password</li>
<li>RTSP Stream URL - <code>http://&lt;&lt;camera-ip-address&gt;&gt;:88/videoMain</code></li>
<li>RTSP Stream URL - <code>http://&lt;&lt;camera-ip-address&gt;&gt;:88/videoSub</code></li>
</ul>
</li>
<li>Click <em>Save RTSP Stream URL</em> and the <em>Save</em> button.</li>
<li>Refresh the Page. This should load the snapshot of the camera and also show additional tabs.</li>
<li>Switch to the <em>Stream Management</em> tab and change the <em>Low Resolution Stream</em> value to <em>Stream 2</em>.</li>
<li>Switch to the <em>Integrations and Extensions</em> tab and check <em>OpenCV Motion Detection</em> and <em>HomeKit</em>. Refresh the page. The integrations should look like the below screenshot.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/09.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/09_hu_f250f80fe80710d9.png 400w,
                    
                    
                    

                    

                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/09.png
                    " 
                />
                
                <img alt="Integrations and Extensions" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/09.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Integrations and Extensions</span>
    </span>
</span></a></p>
<ul>
<li>Switch to the <em>OpenCV Motion Detection</em> tab and set the settings as you wish to tweak. For my setup I only changed the <em>Motion Area</em> to <em>1000</em>, <em>Motion Threshold</em> to <em>15</em>, and <em>Frame Analysis Interval</em> to <em>500</em>.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/10.png">
            <picture><source 
                    srcset="
                    
                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/10_hu_af57ad8a72614d48.png 400w,
                    
                    
                    

                    

                    

                    /blog/set-up-foscam-floodlight-camera-in-homekit/images/10.png
                    " 
                />
                
                <img alt="OpenCV Motion Detection" 
                        src="/blog/set-up-foscam-floodlight-camera-in-homekit/images/10.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">OpenCV Motion Detection</span>
    </span>
</span></a></p>
<ul>
<li>Switch to the HomeKit Pairing tab and make sure the <em>Standalone Accessory Mode</em> is checked.</li>
<li>You may now add the camera to HomeKit. The QR Code to pair with HomeKit will be available under the HomeKit tab of the camera under Scrypted.</li>
</ul>
<h3 id="operating-the-floodlight">Operating the Floodlight</h3>
<ul>
<li>Install the <strong>Foscam Floodlight Plugin</strong> from scrypted plugins.</li>
<li>Select <em>Add Device</em> and enter a name for the Floodlight.</li>
<li>On the Device page under <em>General Settings</em> set the <strong>Foscam IP</strong> to the device camera ip. Note the default port for the Camera is <em>88</em>.</li>
<li>Set the camera <strong>Username</strong> and <strong>Password</strong> and hit <em>Save</em>.</li>
<li>Enable HomeKit integration, and pair with HomeKit.</li>
<li>The device will now let you to turn the floodlight on/off and set the brightness.</li>
</ul>
<p>I also blocked the camera ips from accessing the internet except the <em>NTP</em> port via my firewall. The cameras connect locally to my Home Hub (Apple TV) and then are available to HomeKit everywhere through that. So that is an additional level of privacy I enjoy. Overall this setup is working very well and HomeKit recognizes People/Pets/Vehicles and Packages pretty well and quickly.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Setting up Keras Tensorflow2 on M1 Mac</title>
      <link>https://patelhiren.com/blog/setting-up-keras-tensorflow2-on-m1-mac/</link>
      <pubDate>Fri, 21 Oct 2022 13:32:11 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/setting-up-keras-tensorflow2-on-m1-mac/</guid>
      <description>&lt;p&gt;I am currently reading &lt;a href=&#34;https://www.amazon.com/gp/product/B0B18D695W&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Deep Learning with TensorFlow and Keras&lt;/a&gt; to get started with Machine Learning/Deep Learning. Here is how I setup a local &lt;em&gt;Keras/Tensorflow 2.0&lt;/em&gt; environment on my &lt;em&gt;M1 Max MacBook Pro&lt;/em&gt; running &lt;em&gt;macOS 12.6&lt;/em&gt;.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I am currently reading <a href="https://www.amazon.com/gp/product/B0B18D695W"target="_blank" rel="noopener noreferrer">Deep Learning with TensorFlow and Keras</a> to get started with Machine Learning/Deep Learning. Here is how I setup a local <em>Keras/Tensorflow 2.0</em> environment on my <em>M1 Max MacBook Pro</em> running <em>macOS 12.6</em>.</p>
<p>Install <a href="https://docs.conda.io/en/latest/miniconda.html"target="_blank" rel="noopener noreferrer"><em>miniconda</em></a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">brew install --cask miniconda
</span></span></code></pre></td></tr></table>
</div>
</div><p>I use zsh with <a href="https://iterm2.com"target="_blank" rel="noopener noreferrer">iTerm2</a> as my terminal so I need to initialize conda with the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">conda init zsh
</span></span></code></pre></td></tr></table>
</div>
</div><p>This will make it so everytime iTerm2 is opened, the conda <em>base</em> environment will be activated. I prefer to activate my environment manually, so I did the below to deactivate the base environment on launch of iTerm2.</p>
<p>In <code>~/.zshrc</code> add the following section after the <code># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</code> line.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># Deactivate base conda environment. You can activate an environment using conda activate &lt;&lt;environment-name&gt;&gt;</span>
</span></span><span class="line"><span class="cl">conda deactivate
</span></span></code></pre></td></tr></table>
</div>
</div><p>We now create an environment named <em>tensorflow</em> where we could run our ML/DL Keras training.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">conda create -n tensorflow <span class="nv">python</span><span class="o">=</span>3.9
</span></span></code></pre></td></tr></table>
</div>
</div><p>We then switch to the <em>tensorflow</em> environment and install dependencies.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># Activate tensorflow environment</span>
</span></span><span class="line"><span class="cl">conda activate tensorflow
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Install apple tensorflow dependencies</span>
</span></span><span class="line"><span class="cl">conda install -c apple tensorflow-deps
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Install tensorflow macos</span>
</span></span><span class="line"><span class="cl">python -m pip install tensorflow-macos
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Install tensorflow metal plugin</span>
</span></span><span class="line"><span class="cl">python -m pip install tensorflow-metal
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Install tensorflow readymade datasets</span>
</span></span><span class="line"><span class="cl">python -m pip install tensorflow-datasets
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Install libjpeg (needed by mathplotlib)</span>
</span></span><span class="line"><span class="cl">brew install libjpeg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Install mathplotlib and jupyterlab</span>
</span></span><span class="line"><span class="cl">conda install -y matplotlib jupyterlab
</span></span></code></pre></td></tr></table>
</div>
</div><p>This may not be necessary for future installs. But I ran into an error with numpy when trying to run my notebook code.</p>
<blockquote>
<p><em><strong>module compiled against API version 0x10 but this version of numpy is 0xf</strong></em></p>
</blockquote>
<p>To correct this I had to run this command in my <em>tensorflow</em> environment.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">python -m pip install numpy --upgrade
</span></span></code></pre></td></tr></table>
</div>
</div><p>Another warning I ran into.</p>
<blockquote>
<p><em><strong>TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See <a href="https://ipywidgets.readthedocs.io/en/stable/user_install.html"target="_blank" rel="noopener noreferrer">https://ipywidgets.readthedocs.io/en/stable/user_install.html</a> from .autonotebook import tqdm as notebook_tqdm</strong></em></p>
</blockquote>
<p>To resolve I ran the below in my <em>tensorflow</em> environment.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">python -m pip install ipywidgets widgetsnbextension pandas-profiling
</span></span></code></pre></td></tr></table>
</div>
</div><p>You may now run <code>jupyter notebook</code> command from the <em>tensorflow</em> environment to start the jupyter notebook environment from the command line. I however prefer using <a href="https://code.visualstudio.com/"target="_blank" rel="noopener noreferrer">Visual Studio Code</a> and start an environment under vscode as documented below.</p>
<ul>
<li>Install the <code>Jupyter</code> extension under vscode.</li>
<li>Load the <em>Command Pallet</em> using (<code>Cmd+Shift+P</code>) and select <code>Jupyter: Select Interpreter to Start Jupyter Server</code> and then select <code>Python 3.9.13 ('tensorflow')</code> or whatever environment you want to use.</li>
<li>Load the <em>Command Pallet</em> using (<code>Cmd+Shift+P</code>) and select <code>Create: New Jupyter Notebook</code></li>
<li>You may now run all the Jupyter notebook in vscode. When run the code cell, vscode will start the jupyter server if it is not already started in the selected environment.</li>
</ul>
<h3 id="code">Code</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;TensorFlow has access to the following devices:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">tf</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">list_physical_devices</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;* </span><span class="si">{</span><span class="n">device</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="output">Output</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">TensorFlow has access to the following devices:
</span></span><span class="line"><span class="cl">* PhysicalDevice(name=&#39;/physical_device:CPU:0&#39;, device_type=&#39;CPU&#39;)
</span></span><span class="line"><span class="cl">* PhysicalDevice(name=&#39;/physical_device:GPU:0&#39;, device_type=&#39;GPU&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Setting Visual Studio Code as default text editor on macOS</title>
      <link>https://patelhiren.com/blog/setting-vscode-as-default-text-editor-on-macos/</link>
      <pubDate>Tue, 23 Mar 2021 22:29:29 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/setting-vscode-as-default-text-editor-on-macos/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://code.visualstudio.com&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Visual Studio Code&lt;/a&gt; is quite capable has become my editor of choice on macOS. Here is how to set it as the default text editor instead of &lt;em&gt;Text Edit&lt;/em&gt;.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p><a href="https://code.visualstudio.com"target="_blank" rel="noopener noreferrer">Visual Studio Code</a> is quite capable has become my editor of choice on macOS. Here is how to set it as the default text editor instead of <em>Text Edit</em>.</p>
<p>Install <a href="https://github.com/moretension/duti"target="_blank" rel="noopener noreferrer">duti</a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">brew install duti
</span></span></code></pre></td></tr></table>
</div>
</div><p>Set <em>Visual Studio Code</em> as the default editor for all text files and public files by running the below commands using <em>duti</em>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># Mark vscode as default editor for all text files</span>
</span></span><span class="line"><span class="cl">duti -s com.microsoft.VSCode public.plain-text all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Some files without extensions are considered public.data and not public.text. Set those to open in vscode as well</span>
</span></span><span class="line"><span class="cl">duti -s com.microsoft.VSCode public.data all
</span></span></code></pre></td></tr></table>
</div>
</div><p>The changes should take effect right away and no reboot or relaunch of <em>Finder</em> should be needed.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>macOS and Active Directory Passwords</title>
      <link>https://patelhiren.com/blog/macos-and-active-directory-passwords/</link>
      <pubDate>Sat, 02 Jan 2021 17:30:27 -0500</pubDate>
      
      <guid>https://patelhiren.com/blog/macos-and-active-directory-passwords/</guid>
      <description>&lt;p&gt;Macs connected to Active Directory routinely need to update passwords. When working remote, Active Directory password change is not exactly easy. Here are the steps I follow to update my Active Directory password and keep my local mac password in sync.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>Macs connected to Active Directory routinely need to update passwords. When working remote, Active Directory password change is not exactly easy. Here are the steps I follow to update my Active Directory password and keep my local mac password in sync.</p>
<p>Connect to corporate VPN so that Active Directory is reachable over VPN. Open Terminal and run the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">kpasswd myusername@FULLADDOMAIN.COM
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">myusername@FULLADDOMAIN.COM&#39;s Password: 
</span></span></span><span class="line"><span class="cl"><span class="go">New password for myusername@FULLADDOMAIN.COM: 
</span></span></span><span class="line"><span class="cl"><span class="go">Verify password - New password for myusername@FULLADDOMAIN.COM: 
</span></span></span><span class="line"><span class="cl"><span class="go">Success
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Once password change is confirmed, run the following to force sync the updated password to keychain.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">dsconfigad -passinterval <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Wait about a minute, log out and log back in. You should be logging in with the new password. If login still requires the old password the password sync with active directory did not happen yet. Log back in with the old password, connect to VPN (You will need to use your new password when connecting to VPN) and run the <code>dsconfigad -passinterval 0</code> command and wait a mintue or so before trying to log out/login.</p>
<p>The process once finished will make sure your local keychain password and AD passwords are in sync.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Cross Compiling on macOS via Docker</title>
      <link>https://patelhiren.com/blog/cross-compiling-on-macos-via-docker/</link>
      <pubDate>Wed, 23 Dec 2020 09:31:48 -0500</pubDate>
      
      <guid>https://patelhiren.com/blog/cross-compiling-on-macos-via-docker/</guid>
      <description>&lt;p&gt;I needed to compile an arm64 binary to run on the &lt;a href=&#34;https://store.ui.com/collections/unifi-network-routing-switching/products/udm-pro&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;UniFi Dream Machine Pro&lt;/a&gt;. This is how I used docker to setup cross compilation tools and compile the binary on macOS.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I needed to compile an arm64 binary to run on the <a href="https://store.ui.com/collections/unifi-network-routing-switching/products/udm-pro"target="_blank" rel="noopener noreferrer">UniFi Dream Machine Pro</a>. This is how I used docker to setup cross compilation tools and compile the binary on macOS.</p>
<p>Get and install <a href="https://docs.docker.com/docker-for-mac/install/"target="_blank" rel="noopener noreferrer">Docker Desktop</a> is not already installed. Once installed we can use <a href="https://github.com/dockcross/dockcross"target="_blank" rel="noopener noreferrer">DockCross</a> to setup an cross compile tool chain we want. Here is an example of how I setup the linux-arm64 toolchain.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">mkdir -p ~/Documents/dockcross
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ~/Documents/dockcross
</span></span><span class="line"><span class="cl">docker run --rm dockcross/linux-arm64 &gt; ./dockcross-linux-arm64
</span></span><span class="line"><span class="cl">chmod +x ./dockcross-linux-arm64
</span></span></code></pre></td></tr></table>
</div>
</div><p>This will setup a linux-arm64 cross compiler. To compile files using this compiler you have to place the files in the same directory as the binary. Here is an exaple of how to compile.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">./dockcross-linux-arm64 bash <span class="se">\
</span></span></span><span class="line"><span class="cl">-c <span class="s1">&#39;$CC -s -O3 main.c -o ./udp-broadcast-relay-redux&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Examining the compiled binary with <em>file</em> command should display <em>ARM aarch64</em> architecture.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">file udp-broadcast-relay-redux
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">udp-broadcast-relay-redux: ELF 64-bit LSB executable, ARM aarch64, version 1 (SYSV), 
</span></span></span><span class="line"><span class="cl"><span class="go">dynamically linked, interpreter /lib/ld-linux-aarch64.so.1, for GNU/Linux 4.10.8, stripped
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Note:</strong> Using <em>$CC</em> is important. If you use <em>gcc</em> directly it will compile using <em>x86_64</em> version.</p>
</blockquote>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Dagger 2 Beginner Tutorial</title>
      <link>https://patelhiren.com/blog/dagger-2-beginner-tutorial/</link>
      <pubDate>Fri, 22 May 2020 15:08:53 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/dagger-2-beginner-tutorial/</guid>
      <description>&lt;p&gt;While reviewing an Android project I discovered it was using &lt;a href=&#34;https://dagger.dev&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Dagger 2&lt;/a&gt; framework. Dagger 2 is a dependency injection framework for Android that is developed by Google. I wanted a quick overview of frameworks major features.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>While reviewing an Android project I discovered it was using <a href="https://dagger.dev"target="_blank" rel="noopener noreferrer">Dagger 2</a> framework. Dagger 2 is a dependency injection framework for Android that is developed by Google. I wanted a quick overview of frameworks major features.</p>
<p>I found the below video series by <a href="https://codinginflow.com"target="_blank" rel="noopener noreferrer">codinginflow.com</a> extermely well done.</p>
<blockquote>
<p><a href="https://codinginflow.com/tutorials/android/dagger-2/part-1-introduction"target="_blank" rel="noopener noreferrer">Watch on codinginflow.com</a></p>
<p><a href="https://www.youtube.com/playlist?list=PLrnPJCHvNZuA2ioi4soDZKz8euUQnJW65"target="_blank" rel="noopener noreferrer">Watch on YouTube</a></p>
<p>&ndash; <em>Florian (codinginflow.com)</em></p>
</blockquote>
<p>He also has a lot of other Android development related series available on his site.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Domain Specific DNS Servers on macOS</title>
      <link>https://patelhiren.com/blog/domain-specific-dns-servers-on-macos/</link>
      <pubDate>Fri, 22 May 2020 14:36:00 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/domain-specific-dns-servers-on-macos/</guid>
      <description>&lt;p&gt;My work has multiple domains (&lt;code&gt;corp.network&lt;/code&gt; and &lt;code&gt;lab.network&lt;/code&gt;) that the nameservers resolve. When in the office the resolution works perfectly. However while conncting over VPN via Tunnelblick the resolution to lab.network was failing.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>My work has multiple domains (<code>corp.network</code> and <code>lab.network</code>) that the nameservers resolve. When in the office the resolution works perfectly. However while conncting over VPN via Tunnelblick the resolution to lab.network was failing.</p>
<p>I could go into my System Preferences-&gt;Network Settings and modify my wifi interface settings to enter a new DNS value for those specific domains. But that felt tedious. Instead I used the below method to specify custom DNS resolver settings for my work domains.</p>
<p>Under <code>/etc/resolver</code> create a file with a name of your choice. I chose <code>corp.netowrk</code> just for clarity.</p>
<p>Here is an example of what the contents could be.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">domain corp.network</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 10.0.0.1</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 10.0.0.2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I could create another file for the lab network with a different dns server.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">domain lab.network</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 10.0.1.1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The above would make it so any lookup to <code>xxx.corp.network</code> would use the specified nameserver at <code>10.0.0.1</code> and <code>10.0.0.2</code>.
If I try to access <code>devserver.lab.network</code> it would ask the nameserver at <code>10.0.1.1</code> for its IP.</p>
<p>You could take it a step further and provide backup lookup settings. For example you may have a server located at <code>demo.corp.com</code> that resolves different IPs based on if you are connected to VPN or not. So <code>demo.corp.com</code> should be resolved via VPN nameservers when you are connected to VPN, but via ISP name servers when not connected to VPN. To achive this you could create two files under <code>/etc/resolver</code> like so.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">domain corp.com</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 10.0.0.1</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 10.0.0.2</span>
</span></span><span class="line"><span class="cl"><span class="na">search_order 1</span>
</span></span><span class="line"><span class="cl"><span class="na">timeout 5</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">domain corp.com</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 1.1.1.1</span>
</span></span><span class="line"><span class="cl"><span class="na">nameserver 1.0.0.1</span>
</span></span><span class="line"><span class="cl"><span class="na">search_order 2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The above two files make it so the macOS DNS resolver will first try to use the VPN domains for resolution. If we dont get a response withing 5 seconds, it will fallback to the second file and use <a href="https://1.1.1.1/dns/"target="_blank" rel="noopener noreferrer">Cloudflare DNS</a> to do an internet lookup of the IP address.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Using Tunnelblick to Connect to WatchGuard VPN</title>
      <link>https://patelhiren.com/blog/using-tunnelblick-to-connect-to-watchguard-vpn/</link>
      <pubDate>Sun, 26 Apr 2020 12:55:50 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/using-tunnelblick-to-connect-to-watchguard-vpn/</guid>
      <description>&lt;p&gt;I needed to connect to a corporate VPN that used &lt;a href=&#34;https://www.watchguard.com&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;WatchGuard&lt;/a&gt;. The IT provided &lt;em&gt;Mobile VPN with SSL Client&lt;/em&gt; software did not work reliably on macOS Catalina. It sometimes show connected but unable to access remote vpn resources.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I needed to connect to a corporate VPN that used <a href="https://www.watchguard.com"target="_blank" rel="noopener noreferrer">WatchGuard</a>. The IT provided <em>Mobile VPN with SSL Client</em> software did not work reliably on macOS Catalina. It sometimes show connected but unable to access remote vpn resources.</p>
<p>I discovered that the <em>WatchGuard</em> VPN internally is an OpenVPN server. I use <a href="https://tunnelblick.net"target="_blank" rel="noopener noreferrer">Tunnelblick</a> for my personal OpenVPN connections and that has worked reliably on macOS Catalina. So if I just had the connection <em>ovpn</em> config file I could use <em>Tunnelblick</em> for my VPN connections.</p>
<p>WatchGuard has a detailed support document that walks the user through downloading their software to use for VPN connection at <a href="https://www.watchguard.com/help/docs/fireware/12/en-US/Content/en-US/mvpn/ssl/mvpn_ssl_client-install_c.html"target="_blank" rel="noopener noreferrer">https://www.watchguard.com/help/docs/fireware/12/en-US/Content/en-US/mvpn/ssl/mvpn_ssl_client-install_c.html</a>.</p>
<p>Turns out that page also provides an option to download the <em>ovpn</em> config that can be used with <em>Tunnelblick</em>.</p>
<h2 id="acquiring-the-ovpn-config">Acquiring the OVPN config</h2>
<ul>
<li>Browse to <code>https://&lt;yourvpnserverip:port&gt;/sslvpn.html</code>. You will be greeted with a login page.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/01.jpg">
            <picture><source 
                    srcset="
                    
                    /blog/using-tunnelblick-to-connect-to-watchguard-vpn/images/01_hu_5205600a052ec080.jpg 400w,
                    
                    
                    

                    

                    

                    /blog/using-tunnelblick-to-connect-to-watchguard-vpn/images/01.jpg
                    " 
                />
                
                <img alt="WatchGuard - Login Page" 
                        src="/blog/using-tunnelblick-to-connect-to-watchguard-vpn/images/01.jpg" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">WatchGuard - Login Page</span>
    </span>
</span></a></p>
<ul>
<li>Login using your corporate credentials.</li>
<li>You will be offered a download page.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/02.jpg">
            <picture><source 
                    srcset="
                    
                    /blog/using-tunnelblick-to-connect-to-watchguard-vpn/images/02_hu_2beb8b39f5863ef7.jpg 400w,
                    
                    
                    

                    

                    

                    /blog/using-tunnelblick-to-connect-to-watchguard-vpn/images/02.jpg
                    " 
                />
                
                <img alt="WatchGuard - Download Page" 
                        src="/blog/using-tunnelblick-to-connect-to-watchguard-vpn/images/02.jpg" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">WatchGuard - Download Page</span>
    </span>
</span></a></p>
<ul>
<li>Select the <strong><em>Download</em></strong> option under <em>Mobile VPN with SSL client profile</em>.</li>
<li>This will offer a <em>client.ovpn</em> file that you can import into <em>Tunnelblick</em> for connection to your corporate network.</li>
</ul>
<p>The page offer options to download the Mobile VPN with SSL Client software for Mac and Windows as well if you want those.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Using mermaid-js to generate Flow Charts</title>
      <link>https://patelhiren.com/blog/using-mermaid-js-to-generate-flow-charts/</link>
      <pubDate>Fri, 24 Apr 2020 12:06:38 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/using-mermaid-js-to-generate-flow-charts/</guid>
      <description>&lt;p&gt;I often need to document a flow chart for new features I am planning to implement. Usually generating flow chart needed me to go to an application that would let me draw rectangles, text, etc. Today I learned about &lt;a href=&#34;https://github.com/mermaid-js/mermaid&#34;title=&#34;mermaid-js GitHub Page&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;mermaid-js&lt;/a&gt; which allows one to use Markdown like syntax to generte various diagrams including flow charts.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I often need to document a flow chart for new features I am planning to implement. Usually generating flow chart needed me to go to an application that would let me draw rectangles, text, etc. Today I learned about <a href="https://github.com/mermaid-js/mermaid"title="mermaid-js GitHub Page"target="_blank" rel="noopener noreferrer">mermaid-js</a> which allows one to use Markdown like syntax to generte various diagrams including flow charts.</p>
<p>There is a live editor available at <a href="https://mermaidjs.github.io/mermaid-live-editor/"target="_blank" rel="noopener noreferrer">https://mermaidjs.github.io/mermaid-live-editor/</a> that allows you to to enter Markdown like text and generate a PNG/SVG output that you can download and embed in your documentation.</p>
<pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">graph TD
A[Christmas] --&gt;|Get money| B(Go shopping)
B --&gt; C{Let me think}
C --&gt;|One| D[Laptop]
C --&gt;|Two| E[iPhone]
C --&gt;|Three| F[fa:fa-car Car]
</code></pre><p>The embedded code block above would generate a flow chart image like the one below.</p>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/mermaid-diagram.png">
            <picture>

                    <source 
                        srcset="
                        
                        
                        

                        

                        

                        /blog/using-mermaid-js-to-generate-flow-charts/images/Dark/mermaid-diagram.png
                        "
                        media="(prefers-color-scheme: dark)"
                    /><source 
                    srcset="
                    
                    
                    

                    

                    

                    /blog/using-mermaid-js-to-generate-flow-charts/images/mermaid-diagram.png
                    " 
                />
                
                <img alt="mermaid - flow chart" 
                        src="/blog/using-mermaid-js-to-generate-flow-charts/images/mermaid-diagram.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>
<p>mermaid-js supports generating</p>
<ul>
<li>Flow Chart</li>
<li>Sequence Diagram</li>
<li>Class Diagram</li>
<li>State Diagram</li>
<li>Gantt Chart</li>
<li>Pie Chart</li>
<li>ER Diagram</li>
</ul>
<p>Documentation is available at <a href="https://mermaid-js.github.io/mermaid"target="_blank" rel="noopener noreferrer">https://mermaid-js.github.io/mermaid</a>.</p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Building this website using open-source tools and hosting it for free</title>
      <link>https://patelhiren.com/blog/website-built-with-open-source-and-hosted-for-free/</link>
      <pubDate>Sat, 18 Apr 2020 16:08:20 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/website-built-with-open-source-and-hosted-for-free/</guid>
      <description>&lt;p&gt;For a while, I have been considering building a website to document things I learn. This year I decided to stop procsanating and get started with it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Introducing &lt;a href=&#34;https://patelhiren.com&#34;title=&#34;Hiren Patel&amp;#39;s Blog&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;patelhiren.com&lt;/a&gt; in all its glory. &amp;#x1f389;&lt;/strong&gt;&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>For a while, I have been considering building a website to document things I learn. This year I decided to stop procsanating and get started with it.</p>
<p><strong>Introducing <a href="https://patelhiren.com"title="Hiren Patel&#39;s Blog"target="_blank" rel="noopener noreferrer">patelhiren.com</a> in all its glory. &#x1f389;</strong></p>
<h2 id="goals">Goals</h2>
<p>For this site I had a few basic goals in mind.</p>
<ul>
<li>It should serve as a log to help me remember and reivew how I did things. I hope that others may find it helpful as well.</li>
<li>The website should be fast and light. Should not be overburdened with Javascript.</li>
<li>Should be able to host website with a simple webserver. No server side software should be necessary.</li>
<li>Allowed me to keep my content in a standard text + image format for easy parsing even when not viewing via a browser. I did not want my content to be stored in binary formats in a database. I want it to be stored in plain text files on the filesystem.</li>
<li>Support code syntax highlighting.</li>
<li>Support SSL encryption on the website.</li>
<li>Support emoji.</li>
</ul>
<p>The above goals meant I was going to be building a Static Site using one of the many <a href="https://www.staticgen.com"target="_blank" rel="noopener noreferrer">Static Site Generator Tools</a></p>
<h2 id="tools">Tools</h2>
<p>After deciding I wanted a static site, I researched the various <a href="https://www.staticgen.com"target="_blank" rel="noopener noreferrer">Static Site Generator Tools</a> and settled on <a href="https://gohugo.io"target="_blank" rel="noopener noreferrer"><em>Hugo</em></a> as my choice.</p>
<p>Hugo written in <a href="https://golang.org"target="_blank" rel="noopener noreferrer">Go</a>, is highly reviewed and praised for its speed of site generation. It supports macOS (my primary OS of choice), Windows, Linux, OpenBSD and FreeBSD. It has a very well documented site and looks to have an active community developing and supporting it. It allows me to create my content in <a href="https://daringfireball.net/projects/markdown/"target="_blank" rel="noopener noreferrer">Markdown</a> syntax thus allowing me to keep it in plain text on the filesystem. It also supports code syntax highlighting and emoji &#x1f44c;. You can check details of Hugo&rsquo;s Makrdown support at <a href="https://www.markdownguide.org/tools/hugo/"target="_blank" rel="noopener noreferrer">markdownguide.org</a></p>
<p>Hugo supports a variety of <a href="https://themes.gohugo.io"target="_blank" rel="noopener noreferrer">Themes</a>. I settled on <a href="https://themes.gohugo.io/hugo-notepadium/"target="_blank" rel="noopener noreferrer">Notepadium</a> because it provided most of what I wanted out of box. I plan to customize it a bit to my liking as I learn more.</p>
<h2 id="hosting">Hosting</h2>
<p>For hosting I decided to use <a href="https://pages.github.com"target="_blank" rel="noopener noreferrer">GitHub Pages</a>. GitHub Pages is free, supports SSL and provides automatic CDN for serving fast webpages closer to your user. It also had the added benefit of having my generated site auotmatically have commit history and remote backup.</p>
<h2 id="installing-hugo-and-building-your-site">Installing Hugo and Building your site</h2>
<p>I use macOS as my primary OS so these steps are for for the Mac. However the steps should be very similar if you are using any other supported OS. <a href="https://brew.sh"target="_blank" rel="noopener noreferrer">Homebrew</a> and <em>git</em> <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> is expected to be installed before you follow the rest of the steps.</p>
<p>Install Hugo</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">brew install hugo
</span></span></code></pre></td></tr></table>
</div>
</div><p>To verify the install run</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">hugo version
</span></span></code></pre></td></tr></table>
</div>
</div><p>Create your new site</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">hugo new site patelhiren.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add the <em><a href="https://themes.gohugo.io/hugo-notepadium/"target="_blank" rel="noopener noreferrer">Notepadium</a></em> Theme</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="nb">cd</span> patelhiren.com
</span></span><span class="line"><span class="cl">git init
</span></span><span class="line"><span class="cl">git submodule add https://github.com/cntrump/hugo-notepadium themes/notepadium
</span></span></code></pre></td></tr></table>
</div>
</div><p>Activate the theme for your site by adding it to the <em>config.toml</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;theme = &#34;notepadium&#34;&#39;</span> &gt;&gt; config.toml
</span></span></code></pre></td></tr></table>
</div>
</div><p>Create a new post <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">hugo new blog/my-first-post/index.md
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can find your content under <em>content</em> folder. You can open the newly created index.md file in any Markdown editor of choice <sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup> and edit and save your content. Here is an example post to suggest what&rsquo;s possible.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">title: &#34;My First Post&#34;
</span></span><span class="line"><span class="cl">description: &#34;This is my first post in Hugo. This shows up in Google search.&#34;
</span></span><span class="line"><span class="cl">date: 2020-04-18T16:08:20-04:00
</span></span><span class="line"><span class="cl">draft: true
</span></span><span class="line"><span class="cl">tags: [
</span></span><span class="line"><span class="cl">    &#34;Tag 1&#34;,
</span></span><span class="line"><span class="cl">    &#34;Tag 2&#34;
</span></span><span class="line"><span class="cl">]
</span></span><span class="line"><span class="cl">categories: [
</span></span><span class="line"><span class="cl">    &#34;Category 1&#34;,
</span></span><span class="line"><span class="cl">    &#34;Category 2&#34;
</span></span><span class="line"><span class="cl">]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Hello everyone welcome to you website.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;!--more--&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">This is the extended content of my first post.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once you save your content you can test it locally by activating Hugo local web server.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">hugo server -D
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can navigate to your local site at <a href="http://localhost:1313/"target="_blank" rel="noopener noreferrer">http://localhost:1313/</a>.</p>
<p>Edit you <em>config.toml</em> to configure the rest of your site settings. Here is mine.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="nx">baseURL</span> <span class="p">=</span> <span class="s2">&#34;https://patelhiren.com/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">languageCode</span> <span class="p">=</span> <span class="s2">&#34;en-us&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;Hiren Patel&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">theme</span> <span class="p">=</span> <span class="s2">&#34;notepadium&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">copyright</span> <span class="p">=</span> <span class="s2">&#34;¬©2020 Hiren Patel.&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">enableEmoji</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">enableRobotsTXT</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">highlight</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">codeFences</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">noClasses</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="nx">linenos</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">goldmark</span><span class="p">.</span><span class="nx">renderer</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">unsafe</span> <span class="p">=</span> <span class="kc">true</span>  <span class="c"># enable raw HTML in Markdown</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">style</span> <span class="p">=</span> <span class="s2">&#34;auto&#34;</span>  <span class="c"># default: auto. light: light theme, dark: dark theme, auto: based on system.</span>
</span></span><span class="line"><span class="cl"><span class="nx">dateFormat</span> <span class="p">=</span> <span class="s2">&#34;Jan 02, 2006&#34;</span>  <span class="c"># if unset, default is &#34;2006-01-02&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">readingTime</span> <span class="p">=</span> <span class="kc">false</span>  <span class="c"># show reading time after article date</span>
</span></span><span class="line"><span class="cl"><span class="nx">logo</span> <span class="p">=</span> <span class="s2">&#34;patelhiren-logo.png&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">slogan</span> <span class="p">=</span> <span class="s2">&#34;Documenting things as I learn.&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">assets</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">css</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;css/fonts.css&#34;</span><span class="p">,</span> <span class="s2">&#34;css/light.css&#34;</span><span class="p">,</span> <span class="s2">&#34;css/dark.css&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">comments</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>  <span class="c"># En/Disable comments globally, default: false. You can always enable comments on per page.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">share</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>  <span class="c"># En/Disable share globally, default: false. You can always enable share on per page.</span>
</span></span><span class="line"><span class="cl"><span class="nx">addThisId</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">inlineToolId</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">math</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span> <span class="c"># load math globally, default: false. You can always enable math on per page.</span>
</span></span><span class="line"><span class="cl"><span class="nx">use</span> <span class="p">=</span> <span class="s2">&#34;katex&#34;</span>  <span class="c"># builtin: &#34;katex&#34;, &#34;mathjax&#34;.  default: &#34;katex&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">syntax</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">use</span> <span class="p">=</span> <span class="s2">&#34;none&#34;</span>  <span class="c"># builtin: &#34;prismjs&#34;, &#34;hljs&#34;. &#34;none&#34; means Chroma</span>
</span></span><span class="line"><span class="cl"><span class="nx">theme</span> <span class="p">=</span> <span class="s2">&#34;xcode&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">darkTheme</span> <span class="p">=</span> <span class="s2">&#34;xcode-dark&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">nav</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">showCategories</span> <span class="p">=</span> <span class="kc">true</span>       <span class="c"># /categories/</span>
</span></span><span class="line"><span class="cl"><span class="nx">showTags</span> <span class="p">=</span> <span class="kc">true</span>             <span class="c"># /tags/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>To build your static site run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">hugo -D
</span></span></code></pre></td></tr></table>
</div>
</div><p>The output will be saved under <em>./public/</em> directory. You may copy the contents of this folder to any webserver and your website will be servered.</p>
<h2 id="hosting-your-site-on-github-pages">Hosting your site on GitHub Pages</h2>
<ul>
<li>Create a repository to hold your Hugo content and source files on GitHub. Mine is called <em>patelhiren.com</em></li>
<li>Create a repository called <em>&lt;username&gt;.github.io</em>. Replace <em>&lt;username&gt;</em> with your GitHub username. Mine is called patelhiren.github.io.</li>
<li>Clone your source project via:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># adjust to match your git url.</span>
</span></span><span class="line"><span class="cl">git clone git@github.com:patelhiren/patelhiren.com.git
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Paste your existing source files in the new repository folder.</p>
</li>
<li>
<p>Run and verify your local Hugo files from local repo by running <code>hugo server -D</code> and accessing the site at <a href="http://localhost:1313/"target="_blank" rel="noopener noreferrer">http://localhost:1313/</a>.</p>
</li>
<li>
<p>Once you are happy with the results:</p>
<ul>
<li>Press Ctrl+C to kill the server</li>
<li>Before proceeding completely remove the public directory</li>
</ul>
</li>
<li>
<p>Add your public site as a git submodule. Like so:</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># adjust to match your GitHub Pages repo</span>
</span></span><span class="line"><span class="cl">git submodule add -b master git@github.com:patelhiren/patelhiren.github.io.git
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="automating-the-deployment-process">Automating the deployment process</h3>
<p>Create a new file <code>deploy.sh</code> and set its contents to below script. This will allow you to run <code>deploy.sh</code> to build your site and deploy to GitHub in one go.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># If a command fails then the deploy stops</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;\033[0;32mDeploying updates to GitHub...\033[0m\n&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Go To Public folder</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> public
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Discard local changes on public folder</span>
</span></span><span class="line"><span class="cl">git reset
</span></span><span class="line"><span class="cl">git checkout .
</span></span><span class="line"><span class="cl">git clean -fdx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Pull the latest changes before updating</span>
</span></span><span class="line"><span class="cl">git checkout master
</span></span><span class="line"><span class="cl">git pull origin master
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Garbage collect hugo image-processing generated images.</span>
</span></span><span class="line"><span class="cl">hugo --gc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build the project.</span>
</span></span><span class="line"><span class="cl">hugo <span class="c1"># if using a theme, replace with `hugo -t &lt;YOURTHEME&gt;`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Go To Public folder</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> public
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Add changes to git.</span>
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Commit changes.</span>
</span></span><span class="line"><span class="cl"><span class="nv">msg</span><span class="o">=</span><span class="s2">&#34;rebuilding site </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nv">msg</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;</span><span class="nv">$msg</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Push source and build repos.</span>
</span></span><span class="line"><span class="cl">git push origin master
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Your site will then be available at <code>https://&lt;username&gt;.github.io</code>.</li>
</ul>
<h2 id="customizing-github-pages-to-use-a-custom-domain">Customizing GitHub pages to use a custom domain</h2>
<p>If you plan to use your own doamin instead of the &lt;username&gt;.github.io you need to follow the guide at <a href="https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site"target="_blank" rel="noopener noreferrer">Managing a custom domain for your GitHub Pages site</a>.</p>
<p>For my site I did the following:</p>
<ul>
<li>Create a file called <code>CNAME</code> and set its contents to <em>patelhiren.com</em>.</li>
<li>Added the <code>CNAME</code> file to the git repo at patelhiren.github.io.</li>
<li>Got to Repo Settings at <a href="https://github.com/patelhiren/patelhiren.github.io/settings"target="_blank" rel="noopener noreferrer">https://github.com/patelhiren/patelhiren.github.io/settings</a> and set <strong>Custom domain</strong> and <strong>Enforce HTTPS</strong> settings.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/01.png">
            <picture><source 
                    srcset="
                    
                    /blog/website-built-with-open-source-and-hosted-for-free/images/01_hu_f8cf2a96e93b4973.png 400w,
                    
                    
                    
                    /blog/website-built-with-open-source-and-hosted-for-free/images/01_hu_4383a184a6f2d4d0.png 600w,
                    

                    
                    /blog/website-built-with-open-source-and-hosted-for-free/images/01_hu_ad528813d2f7789d.png 1000w,
                    

                    
                    /blog/website-built-with-open-source-and-hosted-for-free/images/01_hu_94bdcf91d0ad626f.png 1200w,
                    

                    /blog/website-built-with-open-source-and-hosted-for-free/images/01.png
                    " 
                />
                
                <img alt="GitHub Pages Custom Domain Settings" 
                        src="/blog/website-built-with-open-source-and-hosted-for-free/images/01.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">GitHub Pages Custom Subdomain Settings</span>
    </span>
</span></a></p>
<h2 id="publishing-new-postchanges">Publishing new Post/Changes</h2>
<p>To publish a new post:</p>
<ul>
<li>Create a new post similar to to command below.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">hugo new blog/my-new-post/index.md
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Set and edit your post using Markdown tools.</p>
</li>
<li>
<p>Run and verify your local Hugo files from local repo by running <code>hugo server -D</code> and accessing the site at <a href="http://localhost:1313/"target="_blank" rel="noopener noreferrer">http://localhost:1313/</a>.</p>
</li>
<li>
<p>Run <code>deploy.sh</code> to deploy your site.</p>
</li>
<li>
<p>Commit your changes to your source repo.</p>
</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This is all that should be necessary. It looks like a lot of steps, but in practice it is very simple and doesn&rsquo;t require as much work to maintain for publishing new posts.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>For a git GUI, I prefer <a href="https://www.git-fork.com"target="_blank" rel="noopener noreferrer">Fork</a>.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Creating a blog post this way with a folder as the post name allows you to keep images within the same folder instead of keeping images in the root folder. This felt like better grouping of content vs the default Hugo suggested way of generating new post via <em>hugo new blog/my-first-post</em>.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>I prefer <a href="https://code.visualstudio.com"target="_blank" rel="noopener noreferrer">Visual Studio Code</a>. Tip: If using Visual Studio Code you can press <em>CMD+K,V</em> to activate side-by-side live preview of the Markdown you are typing.&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>]]></content:encoded>
      
    </item>
    
    <item>
      <title>PNG Crush Automator Action</title>
      <link>https://patelhiren.com/blog/pngcrush-automator-action/</link>
      <pubDate>Sun, 12 Apr 2020 22:04:30 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/pngcrush-automator-action/</guid>
      <description>&lt;p&gt;When using png files on the web it is often preferred to use tools like pngcrush on them to optimize their size. This is usually a manual process where a command line tool or website is used to process each image file. I decided to automate this process for me via macOS &lt;a href=&#34;https://support.apple.com/guide/automator/welcome/mac&#34;target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Automator&lt;/a&gt;.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>When using png files on the web it is often preferred to use tools like pngcrush on them to optimize their size. This is usually a manual process where a command line tool or website is used to process each image file. I decided to automate this process for me via macOS <a href="https://support.apple.com/guide/automator/welcome/mac"target="_blank" rel="noopener noreferrer">Automator</a>.</p>
<p>To crush png images I use the opensource tool <a href="https://pmt.sourceforge.io/pngcrush/"target="_blank" rel="noopener noreferrer">PNG Crush</a>.</p>
<p>If you have <a href="https://developer.apple.com/xcode/"target="_blank" rel="noopener noreferrer">Xcode</a> installed, the pngcrush tool is included as a part of the iOS SDK and there is no additional download required.</p>
<p>If you do not have Xcode you may install <em>PNG Crush</em> via <a href="https://brew.sh"target="_blank" rel="noopener noreferrer">Homebrew</a> using the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">brew install pngcrush
</span></span></code></pre></td></tr></table>
</div>
</div><p>If using Xcode method, the <em><strong>pngcrush</strong></em> binary will be at <code>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/pngcrush</code>.</p>
<p>If using Homebrew, the <em><strong>pngcrush</strong></em> binary will be at <code>/usr/local/bin/pngcrush</code></p>
<p>For the rest of the article I will assume the Homebrew method is used. You just need to adjust the paths for the binary if the Xcode method is used.</p>
<p>To crush a PNG image via Terminal you can run the below command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># pngcrush will process the input.png and create a compressed crushed.png</span>
</span></span><span class="line"><span class="cl">pngcrush input.png crushed.png
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="automating-the-process-using-automator-on-macos">Automating the process using Automator on macOS.</h2>
<ul>
<li>Launch <em><strong>Automator</strong></em> via Spotlight Search.</li>
<li>Select <em>File</em>, <em>New</em> from the menu. Select <em><strong>Quick Action</strong></em> and click the <em>Choose</em> button.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/01.png">
            <picture><source 
                    srcset="
                    
                    /blog/pngcrush-automator-action/images/01_hu_d95041dc088645c0.png 400w,
                    
                    
                    
                    /blog/pngcrush-automator-action/images/01_hu_f67064edb4c9c63a.png 600w,
                    

                    
                    /blog/pngcrush-automator-action/images/01_hu_6aef051758196510.png 1000w,
                    

                    
                    /blog/pngcrush-automator-action/images/01_hu_952b8bf6b7580b7a.png 1200w,
                    

                    /blog/pngcrush-automator-action/images/01.png
                    " 
                />
                
                <img alt="Automator - New" 
                        src="/blog/pngcrush-automator-action/images/01.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>
<ul>
<li>In the new windows that loads, select the options as below.
<ul>
<li>Workflow receives current - <em><strong>image files</strong></em></li>
<li>in - <em><strong>Finder.app</strong></em></li>
</ul>
</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/02.png">
            <picture><source 
                    srcset="
                    
                    /blog/pngcrush-automator-action/images/02_hu_d7ef3f8431f21b7b.png 400w,
                    
                    
                    
                    /blog/pngcrush-automator-action/images/02_hu_3c3d4c35638f1389.png 600w,
                    

                    
                    /blog/pngcrush-automator-action/images/02_hu_744ab587dd4a6eef.png 1000w,
                    

                    
                    /blog/pngcrush-automator-action/images/02_hu_eed5e9567b32767d.png 1200w,
                    

                    /blog/pngcrush-automator-action/images/02.png
                    " 
                />
                
                <img alt="Automator - New Action" 
                        src="/blog/pngcrush-automator-action/images/02.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>
<ul>
<li>In the search box, type <em><strong>Shell</strong></em> and select the <em><strong>Run Shell Script</strong></em> option to add to the automation on the right by double clicking on it.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/03.png">
            <picture><source 
                    srcset="
                    
                    /blog/pngcrush-automator-action/images/03_hu_1615e5758656a5ad.png 400w,
                    
                    
                    
                    /blog/pngcrush-automator-action/images/03_hu_d42520d23e3e9e94.png 600w,
                    

                    
                    /blog/pngcrush-automator-action/images/03_hu_38fb3d4781ace6ff.png 1000w,
                    

                    
                    /blog/pngcrush-automator-action/images/03_hu_8f85eb205ca80c14.png 1200w,
                    

                    /blog/pngcrush-automator-action/images/03.png
                    " 
                />
                
                <img alt="Automator - Run Shell Script" 
                        src="/blog/pngcrush-automator-action/images/03.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>
<ul>
<li>Change the <em><strong>Pass Input</strong></em> option to <em><strong>as arguments</strong></em>.</li>
<li>Enter the below script commands in the Shell Script box.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="k">for</span> f in <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Verify that the extension of the file is actually png</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># (case insensitive compare)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">filename</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&#34;</span><span class="nv">$f</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">ext</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">filename</span><span class="p">##*.</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$ext</span><span class="s2">&#34;</span> <span class="p">|</span> grep -i png<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># If the file is a png, run pngcrush on it.</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Save the output in the same place with a temporary extension</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># of .crushed_</span>
</span></span><span class="line"><span class="cl">    /opt/homebrew/bin/pngcrush <span class="s2">&#34;</span><span class="nv">$f</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$f</span><span class="s2">.crushed_&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Overwrite the original file with the crushed file.</span>
</span></span><span class="line"><span class="cl">    mv <span class="s2">&#34;</span><span class="nv">$f</span><span class="s2">.crushed_&#34;</span> <span class="s2">&#34;</span><span class="nv">$f</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Save the automation as <em><strong>PNG Crush</strong></em>.</li>
</ul>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/04.png">
            <picture><source 
                    srcset="
                    
                    /blog/pngcrush-automator-action/images/04_hu_ff3d21d706da1bf.png 400w,
                    
                    
                    
                    /blog/pngcrush-automator-action/images/04_hu_6b831092052e4214.png 600w,
                    

                    
                    /blog/pngcrush-automator-action/images/04_hu_995d894793146157.png 1000w,
                    

                    
                    /blog/pngcrush-automator-action/images/04_hu_7806f2b963de23ca.png 1200w,
                    

                    /blog/pngcrush-automator-action/images/04.png
                    " 
                />
                
                <img alt="Automator - Final Code" 
                        src="/blog/pngcrush-automator-action/images/04.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>
<p>You may now browse to any png file(s) in Finder and right click, select <em><strong>Services</strong></em> -&gt; <em><strong>PNG Crush</strong></em>.</p>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/05.png">
            <picture><source 
                    srcset="
                    
                    /blog/pngcrush-automator-action/images/05_hu_13240fec6c145b38.png 400w,
                    
                    
                    
                    /blog/pngcrush-automator-action/images/05_hu_1d42f284206c81f1.png 600w,
                    

                    
                    /blog/pngcrush-automator-action/images/05_hu_693c350105e2a6db.png 1000w,
                    

                    
                    /blog/pngcrush-automator-action/images/05_hu_2eb55f1fbe77e194.png 1200w,
                    

                    /blog/pngcrush-automator-action/images/05.png
                    " 
                />
                
                <img alt="Finder - Services Menu" 
                        src="/blog/pngcrush-automator-action/images/05.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>
<p>While the automation is running you will see a spinning cog in you Menu bar in the top right. When the cog disappears the automation is done and your images have been processed by <em><strong>pngcrush</strong></em>.</p>
<p>

<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/06.png">
            <picture><source 
                    srcset="
                    
                    /blog/pngcrush-automator-action/images/06_hu_6d28ff6fbd865374.png 400w,
                    
                    
                    

                    

                    

                    /blog/pngcrush-automator-action/images/06.png
                    " 
                />
                
                <img alt="Finder - Automator Running" 
                        src="/blog/pngcrush-automator-action/images/06.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title"></span>
    </span>
</span></a></p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Catalina and Skype for Business Screensharing</title>
      <link>https://patelhiren.com/blog/catalina-and-skype-for-business-screensharing/</link>
      <pubDate>Fri, 10 Apr 2020 20:11:49 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/catalina-and-skype-for-business-screensharing/</guid>
      <description>&lt;p&gt;After upgrading to macOS Catalina (10.15.4), Screensharing via Skype for Business stopped working. Here is waht I did to fix it.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>After upgrading to macOS Catalina (10.15.4), Screensharing via Skype for Business stopped working. Here is waht I did to fix it.</p>
<p>macOS Catalina introduced new Privacy settings that prevents Skype for Business screensharing to work if proper permissions are not provided. On trying to start Screensharing via <strong>Conversations-&gt;Share Screen</strong> option, Skype would display a message stating check the <strong>Skype For Business</strong> option under <strong>System Preferences-&gt;Security &amp; Privacy-&gt;Privacy Tab-&gt;Screen Recording</strong>. However navigating there did not display &ldquo;Skype For Business* as an option.</p>
<p>To correct it I first reset the &ldquo;Screen Recording&rdquo; permissions for Skype by running this command on Terminal.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">tccutil reset ScreenCapture com.microsoft.SkypeForBusiness
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>If you do not provide the <strong>com.microsoft.SkypeForBusiness</strong> identifier, the Screen Recording permissions for all apps will be reset and you will have to provide permissions again as needed.</p>
</blockquote>
<p>After running that command. I relaunched Skype, selected a Conversation and tried sharing via the screen via the menu option again. I got the same error I got earlier from Skype and no Screen Recording permission prompt was displayed by the OS.</p>
<p>I had to select the &ldquo;Share Screen&rdquo; icon on the top right of the conversation window. When I tapped that, the OS permissions prompt for Screen Recording came up. I gave the required permission, restarted Skype and was successfully able to share my screen.</p>
<p><em>For the record this was on Skype for Business version 16.28.175.</em></p>]]></content:encoded>
      
    </item>
    
    <item>
      <title>Boot Camp on External Drive</title>
      <link>https://patelhiren.com/blog/boot-camp-on-external-drive/</link>
      <pubDate>Mon, 06 Apr 2020 14:02:10 -0400</pubDate>
      
      <guid>https://patelhiren.com/blog/boot-camp-on-external-drive/</guid>
      <description>&lt;p&gt;I had a spare SSD and a USB enclosure for it. Installing windows on an external drive is unsupported by Microsoft and the setup will abort stating Windows cannot be installed on an external drive. Here is how I managed to install Windows 10 Pro on the external SSD and boot from it on my iMac.&lt;/p&gt;</description>
      
      <content:encoded><![CDATA[<p>I had a spare SSD and a USB enclosure for it. Installing windows on an external drive is unsupported by Microsoft and the setup will abort stating Windows cannot be installed on an external drive. Here is how I managed to install Windows 10 Pro on the external SSD and boot from it on my iMac.</p>
<h6 id="my-environment">My Environment</h6>
<ul>
<li>27-inch iMac 2019, running macOS Catalina 10.15.4</li>
<li>120 GB ScanDisk Plus SSD</li>
<li>2.5-inch SATA USB enclosure</li>
</ul>
<h6 id="software-needed">Software needed</h6>
<ul>
<li>VMware Fusion 11.5.3 (Trial is fine)</li>
<li>Windows 10 ISO</li>
</ul>
<h6 id="directions">Directions</h6>
<ul>
<li>Launch Disk Utility and select the plugged in SSD. Format as below


<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/01.png">
            <picture>

                    <source 
                        srcset="
                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu_37e776f44f118384.png 400w,
                        
                        
                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu_5a4b76fb68f6a377.png 600w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu_a8f4274529767127.png 1000w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/01_hu_1562304620a92662.png 1200w,
                        

                        /blog/boot-camp-on-external-drive/images/Dark/01.png
                        "
                        media="(prefers-color-scheme: dark)"
                    /><source 
                    srcset="
                    
                    /blog/boot-camp-on-external-drive/images/01_hu_888c9a07e5bcf836.png 400w,
                    
                    
                    
                    /blog/boot-camp-on-external-drive/images/01_hu_c97268cb491cf8ca.png 600w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/01_hu_21da07b6bce4d901.png 1000w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/01_hu_15d32e45bb516e1b.png 1200w,
                    

                    /blog/boot-camp-on-external-drive/images/01.png
                    " 
                />
                
                <img alt="DiskUtility - Format Disk Settings" 
                        src="/blog/boot-camp-on-external-drive/images/01.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Disk Utility - Format Disk</span>
    </span>
</span></a></li>
<li>Make a note of the Disk Id. In my case it was <code>disk5</code></li>
<li>Create a new Windows 10 Virtual Machine under VMware Fusion.</li>
<li>Delete the default Disk the VMware Fusion creates when setting up the machine.</li>
<li>Exit VMware Fusion and launch Terminal and run the following command. Adjust the Virtual Manchine path as needed.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">/Applications/VMware<span class="se">\ </span>Fusion.app/Contents/Library/vmware-rawdiskCreator <span class="se">\
</span></span></span><span class="line"><span class="cl">create /dev/disk5 <span class="se">\
</span></span></span><span class="line"><span class="cl">fullDevice ~/Virtual<span class="se">\ </span>Machines.localized/Boot<span class="se">\ </span>Camp.vmwarevm/external-hdd <span class="se">\
</span></span></span><span class="line"><span class="cl">ide
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Open <code>Boot Camp.vmx</code> file in a text editor like Visual Studio Code and add the below lines.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">ide1:0.present</span> <span class="o">=</span> <span class="s">&#34;TRUE&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">ide1:0.fileName</span> <span class="o">=</span> <span class="s">&#34;external-hdd.vmdk&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>If you are running macOS Catalina you will need to give <code>Full Disk Access</code> Permissions to <code>com.vmware.DiskHelper</code>. If you do not see it in the list. Try to start the Virtual Machine. You will get an error starting after which the item will show up in the list.


<span class="image-container">
    <span class="link">
        <a target="_blank" rel="noopener noreferrer" href="images/02.png">
            <picture>

                    <source 
                        srcset="
                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hu_3d4b9e33a300de7f.png 400w,
                        
                        
                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hu_6059e001e0261bf0.png 600w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hu_8703ca8095b07d80.png 1000w,
                        

                        
                        /blog/boot-camp-on-external-drive/images/Dark/02_hu_e080a15a5fd63eda.png 1200w,
                        

                        /blog/boot-camp-on-external-drive/images/Dark/02.png
                        "
                        media="(prefers-color-scheme: dark)"
                    /><source 
                    srcset="
                    
                    /blog/boot-camp-on-external-drive/images/02_hu_8fe245289a05c4c3.png 400w,
                    
                    
                    
                    /blog/boot-camp-on-external-drive/images/02_hu_53845f4c0e8885cb.png 600w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/02_hu_a9258d80a3d399b9.png 1000w,
                    

                    
                    /blog/boot-camp-on-external-drive/images/02_hu_8190eeffba24d043.png 1200w,
                    

                    /blog/boot-camp-on-external-drive/images/02.png
                    " 
                />
                
                <img alt="Security &amp; Privacy - Full Disk Access" 
                        src="/blog/boot-camp-on-external-drive/images/02.png" />
            </picture>
        </a>
    </span>
    <span class="caption">
        <span class="title">Security & Privacy - Full Disk Access</span>
    </span>
</span></a></li>
<li>Quit and Restart VMWare fusion. Start the Boot Camp vm. You will be prompted for you admin password.</li>
<li>Once the VM starts boot off the Windows 10 ISO and install Windows 10 on the attached disk. Delete all partitions on the disk during install and let windows create new partitions as needed.</li>
<li>Once the install is fully finished, install VMware Tools to help facilitate copying of files.</li>
<li>On the Mac launch <code>Boot Camp Assistant.app</code>. From the <code>Action</code> menu select <code>Download Windows Support Software</code>. Follow the steps to get the Boot Camp windows drivers.</li>
<li>Copy the Drivers to the Windows machine. Shutdown the VM.</li>
<li>You may now reboot into the windows partition by rebooting the Mac and holding down the Option key during boot.</li>
<li>After Windows boots up, you will have to install the Boot Camp drivers by launching BootCamp setup from the <code>WindowsSupport\BootCamp\Setup.exe</code> folder.</li>
</ul>
<h6 id="additional-steps">Additional Steps</h6>
<ul>
<li>After installation of the Boot Camp drivers and reboot, Windows still had a few missing drivers under Device Manager. All I had to do was select <code>Update Driver</code> and select the <code>WindowsSupport\$WinPEDriver$</code> folder to look for drivers.</li>
<li>Speakers were not working properly on the 2019 iMac even though all drivers were installed. I had to go to <code>Device Manager</code>-&gt;<code>Sound, video and game controllers</code>-&gt;<code>High Definition Audio Device</code>. Select Update driver and point it to <code>WindowsSupport\$WinPEDriver$\Cirrus</code>. This installed the correct drivers and the Speakers started working.</li>
<li>Another speed bump I ran into was that after a few Windows updates were applied windows declined to update to the November 2019 update stating installing Windows on External USB is unsupported. &#x1f612; I had to go to the Registry at <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control</code> and set the <code>PortableOperatingSystem</code> value to <code>0</code> and reboot. After that the update installed ok. &#x1f60f;</li>
</ul>]]></content:encoded>
      
    </item>
    
  </channel>
</rss>